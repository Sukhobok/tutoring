(function(a){a.Jcrop=function(f,g){function l(a){return Math.round(a)+"px"}function b(b){b=a(b).offset();return[b.left,b.top]}function d(a){return[a.pageX-P[0],a.pageY-P[1]]}function t(b){"object"!==typeof b&&(b={});k=a.extend(k,b);a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!==typeof k[b]&&(k[b]=function(){})})}function e(a,f,k){P=b(q);ca.setCursor("move"===a?a:a+"-resize");if("move"===a)return ca.activateHandlers(c(f),y,k);f=F.getFixed();var e=B(a),d=F.getCorner(B(e));
F.setPressed(F.getCorner(e));F.setCurrent(d);ca.activateHandlers(M(a,f),y,k)}function M(a,b){return function(c){if(k.aspectRatio)switch(a){case "e":c[1]=b.y+1;break;case "w":c[1]=b.y+1;break;case "n":c[0]=b.x+1;break;case "s":c[0]=b.x+1}else switch(a){case "e":c[1]=b.y2;break;case "w":c[1]=b.y2;break;case "n":c[0]=b.x2;break;case "s":c[0]=b.x2}F.setCurrent(c);u.update()}}function c(a){var b=a;ia.watchKeys();return function(a){F.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;u.update()}}function B(a){switch(a){case "n":return"sw";
case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function n(a){return function(c){if(k.disabled||"move"===a&&!k.allowMove)return!1;P=b(q);m=!0;e(a,d(c));c.stopPropagation();c.preventDefault();return!1}}function r(a,b,c){var f=a.width(),k=a.height();f>b&&0<b&&(f=b,k=b/a.width()*a.height());k>c&&0<c&&(k=c,f=c/a.height()*a.width());C=a.width()/f;N=a.height()/k;a.width(f).height(k)}function h(a){return{x:a.x*
C,y:a.y*N,x2:a.x2*C,y2:a.y2*N,w:a.w*C,h:a.h*N}}function y(a){a=F.getFixed();a.w>k.minSelect[0]&&a.h>k.minSelect[1]?(u.enableHandles(),u.done()):u.release();ca.setCursor(k.allowSelect?"crosshair":"default")}function H(a){if(k.disabled||!k.allowSelect)return!1;m=!0;P=b(q);u.disableHandles();ca.setCursor("crosshair");var c=d(a);F.setPressed(c);u.update();ca.activateHandlers(v,y,"touch"===a.type.substring(0,5));ia.watchKeys();a.stopPropagation();a.preventDefault();return!1}function v(a){F.setCurrent(a);
u.update()}function G(){var b=a("<div></div>").addClass(k.baseClass+"-tracker");W&&b.css({opacity:0,backgroundColor:"white"});return b}function J(a){K([a[0]/C,a[1]/N,a[2]/C,a[3]/N]);k.onSelect.call(Z,h(F.getFixed()));u.enableHandles()}function K(a){F.setPressed([a[0],a[1]]);F.setCurrent([a[2],a[3]]);u.update()}function S(){k.disabled=!0;u.disableHandles();u.setCursor("default");ca.setCursor("default")}function Q(){k.disabled=!1;w()}function V(b,c,f){c=c||k.bgColor;k.bgFade&&a.fx.step.hasOwnProperty("backgroundColor")&&
k.fadeTime&&!f?b.animate({backgroundColor:c},{queue:!1,duration:k.fadeTime}):b.css("backgroundColor",c)}function w(a){k.allowResize?a?u.enableOnly():u.enableHandles():u.disableHandles();ca.setCursor(k.allowSelect?"crosshair":"default");u.setCursor(k.allowMove?"move":"default");k.hasOwnProperty("trueSize")&&(C=k.trueSize[0]/x,N=k.trueSize[1]/A);k.hasOwnProperty("setSelect")&&(J(k.setSelect),u.done(),delete k.setSelect);ga.refresh();k.bgColor!=T&&(V(k.shade?ga.getShades():aa,k.shade?k.shadeColor||k.bgColor:
k.bgColor),T=k.bgColor);I!=k.bgOpacity&&(I=k.bgOpacity,k.shade?ga.refresh():u.setBgOpacity(I));U=k.maxSize[0]||0;R=k.maxSize[1]||0;ea=k.minSize[0]||0;fa=k.minSize[1]||0;k.hasOwnProperty("outerImage")&&(q.attr("src",k.outerImage),delete k.outerImage);u.refresh()}var k=a.extend({},a.Jcrop.defaults),P,L=navigator.userAgent.toLowerCase(),W=/msie/.test(L),da=/msie [1-6]\./.test(L);"object"!==typeof f&&(f=a(f)[0]);"object"!==typeof g&&(g={});t(g);var L={border:"none",visibility:"visible",margin:0,padding:0,
position:"absolute",top:0,left:0},z=a(f),p=!0;if("IMG"==f.tagName){if(0!=z[0].width&&0!=z[0].height)z.width(z[0].width),z.height(z[0].height);else{var ha=new Image;ha.src=z[0].src;z.width(ha.width);z.height(ha.height)}var q=z.clone().removeAttr("id").css(L).show();q.width(z.width());q.height(z.height());z.after(q).hide()}else q=z.css(L).show(),p=!1,null===k.shade&&(k.shade=!0);r(q,k.boxWidth,k.boxHeight);var x=q.width(),A=q.height(),aa=a("<div />").width(x).height(A).addClass(k.baseClass+"-holder").css({position:"relative",
backgroundColor:k.bgColor}).insertAfter(z).append(q);k.addClass&&aa.addClass(k.addClass);var X=a("<div />"),Y=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),s=a("<div />").width("100%").height("100%").css("zIndex",320),E=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=F.getFixed();k.onDblClick.call(Z,a)}).insertBefore(q).append(Y,s);p&&(X=a("<img />").attr("src",q.attr("src")).css(L).width(x).height(A),Y.append(X));da&&
E.css({overflowY:"hidden"});var D=k.boundary,O=G().width(x+2*D).height(A+2*D).css({position:"absolute",top:l(-D),left:l(-D),zIndex:290}).mousedown(H),T=k.bgColor,I=k.bgOpacity,U,R,ea,fa,C,N,m,ja,ka;P=b(q);var ba=function(){function a(){var b={},c=["touchstart","touchmove","touchend"],f=document.createElement("div"),k;try{for(k=0;k<c.length;k++){var e=c[k],e="on"+e,d=e in f;d||(f.setAttribute(e,"return;"),d="function"==typeof f[e]);b[c[k]]=d}return b.touchstart&&b.touchend&&b.touchmove}catch(h){return!1}}
var c;c=!0===k.touchSupport||!1===k.touchSupport?k.touchSupport:a();return{createDragger:function(a){return function(c){if(k.disabled||"move"===a&&!k.allowMove)return!1;P=b(q);m=!0;e(a,d(ba.cfilter(c)),!0);c.stopPropagation();c.preventDefault();return!1}},newSelection:function(a){return H(ba.cfilter(a))},cfilter:function(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return a},isSupported:a,support:c}}(),F=function(){function a(){if(!k.aspectRatio){var b=
h-e,p=g-d;U&&Math.abs(b)>U&&(h=0<b?e+U:e-U);R&&Math.abs(p)>R&&(g=0<p?d+R:d-R);fa/N&&Math.abs(p)<fa/N&&(g=0<p?d+fa/N:d-fa/N);ea/C&&Math.abs(b)<ea/C&&(h=0<b?e+ea/C:e-ea/C);0>e&&(h-=e,e-=e);0>d&&(g-=d,d-=d);0>h&&(e-=h,h-=h);0>g&&(d-=g,g-=g);h>x&&(b=h-x,e-=b,h-=b);g>A&&(b=g-A,d-=b,g-=b);e>x&&(b=e-A,g-=b,d-=b);d>A&&(b=d-A,g-=b,d-=b);return f(c(e,d,h,g))}var b=k.aspectRatio,p=k.minSize[0]/C,w=k.maxSize[0]/C,v=h-e,t=g-d,m=Math.abs(v),l=Math.abs(t);0===w&&(w=10*x);m/l<b?(m=g,l*=b,l=0>v?e-l:l+e,0>l?(l=0,m=
Math.abs((l-e)/b),m=0>t?d-m:m+d):l>x&&(l=x,m=Math.abs((l-e)/b),m=0>t?d-m:m+d)):(l=h,m/=b,m=0>t?d-m:d+m,0>m?(m=0,l=Math.abs((m-d)*b),l=0>v?e-l:l+e):m>A&&(m=A,l=Math.abs(m-d)*b,l=0>v?e-l:l+e));l>e?(l-e<p?l=e+p:l-e>w&&(l=e+w),m=m>d?d+(l-e)/b:d-(l-e)/b):l<e&&(e-l<p?l=e-p:e-l>w&&(l=e-w),m=m>d?d+(e-l)/b:d-(e-l)/b);0>l?(e-=l,l=0):l>x&&(e-=l-x,l=x);0>m?(d-=m,m=0):m>A&&(d-=m-A,m=A);return f(c(e,d,l,m))}function b(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>x&&(a[0]=x);a[1]>A&&(a[1]=A);return[Math.round(a[0]),
Math.round(a[1])]}function c(a,b,e,d){var f=a,k=e,h=b,g=d;e<a&&(f=e,k=a);d<b&&(h=d,g=b);return[f,h,k,g]}function f(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var e=0,d=0,h=0,g=0,p,w;return{flipCoords:c,setPressed:function(a){a=b(a);h=e=a[0];g=d=a[1]},setCurrent:function(a){a=b(a);p=a[0]-h;w=a[1]-g;h=a[0];g=a[1]},getOffset:function(){return[p,w]},moveOffset:function(a){var b=a[0];a=a[1];0>e+b&&(b-=b+e);0>d+a&&(a-=a+d);A<g+a&&(a+=A-(g+a));x<h+b&&(b+=x-(h+b));e+=b;h+=b;d+=a;g+=
a},getCorner:function(b){var c=a();switch(b){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,c.y2];case "sw":return[c.x,c.y2]}},getFixed:a}}(),ga=function(){function b(){return c(F.getFixed())}function c(a){w.top.css({left:l(a.x),width:l(a.w),height:l(a.y)});w.bottom.css({top:l(a.y2),left:l(a.x),width:l(a.w),height:l(A-a.y2)});w.right.css({left:l(a.x2),width:l(x-a.x2)});w.left.css({width:l(a.x)})}function e(){return a("<div />").css({position:"absolute",backgroundColor:k.shadeColor||
k.bgColor}).appendTo(m)}function d(){p||(p=!0,m.insertBefore(q),b(),u.setBgOpacity(1,0,1),X.hide(),f(k.shadeColor||k.bgColor,1),u.isAwake()?g(k.bgOpacity,1):g(1,1))}function f(a,b){V(C(),a,b)}function h(){p&&(m.remove(),X.show(),p=!1,u.isAwake()?u.setBgOpacity(k.bgOpacity,1,1):(u.setBgOpacity(1,1,1),u.disableHandles()),V(aa,0,1))}function g(a,b){p&&(k.bgFade&&!b?m.animate({opacity:1-a},{queue:!1,duration:k.fadeTime}):m.css({opacity:1-a}))}function C(){return m.children()}var p=!1,m=a("<div />").css({position:"absolute",
zIndex:240,opacity:0}),w={top:e(),left:e().height(A),right:e().height(A),bottom:e()};return{update:b,updateRaw:c,getShades:C,setBgColor:f,enable:d,disable:h,resize:function(a,b){w.left.css({height:l(b)});w.right.css({height:l(b)})},refresh:function(){k.shade?d():h();u.isAwake()&&g(k.bgOpacity)},opacity:g}}(),u=function(){function b(c,e){var d=a("<div />").mousedown(n(c)).css({cursor:c+"-resize",position:"absolute",zIndex:e}).addClass("ord-"+c);ba.support&&d.bind("touchstart.jcrop",ba.createDragger(c));
s.append(d);return d}function c(a){var e;for(e=0;e<a.length;e++)b(a[e],N++).addClass("jcrop-dragbar")}function e(b){var c,d;for(d=0;d<b.length;d++){switch(b[d]){case "n":c="hline";break;case "s":c="hline bottom";break;case "e":c="vline right";break;case "w":c="vline"}var f=x,h=b[d],g=c,g=a("<div />").css({position:"absolute",opacity:k.borderOpacity}).addClass(k.baseClass+"-"+g);Y.append(g);f[h]=g}}function d(a){var c;for(c=0;c<a.length;c++){var e=ha,f=a[c],h=k.handleSize,g=b(a[c],N++).css({opacity:k.handleOpacity}).addClass(k.baseClass+
"-handle");h&&g.width(h).height(h);e[f]=g}}function f(){var a=F.getFixed();F.setPressed([a.x,a.y]);F.setCurrent([a.x2,a.y2]);g()}function g(a){if(t)return C(a)}function C(a){var b=F.getFixed(),c=b.h;E.width(Math.round(b.w)).height(Math.round(c));var c=b.x,e=b.y;k.shade||X.css({top:l(-e),left:l(-c)});E.css({top:l(e),left:l(c)});k.shade&&ga.updateRaw(b);t||(E.show(),k.shade?ga.opacity(I):p(I,!0),t=!0);a?k.onSelect.call(Z,h(b)):k.onChange.call(Z,h(b))}function p(a,b,c){if(t||b)k.bgFade&&!c?q.animate({opacity:a},
{queue:!1,duration:k.fadeTime}):q.css("opacity",a)}function m(){M=!0;if(k.allowResize)return s.show(),!0}function w(){M=!1;s.hide()}function v(a){a?(ja=!0,w()):(ja=!1,m())}var t,N=370,x={},ha={},M=!1;k.dragEdges&&a.isArray(k.createDragbars)&&c(k.createDragbars);a.isArray(k.createHandles)&&d(k.createHandles);k.drawBorders&&a.isArray(k.createBorders)&&e(k.createBorders);a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var r=G().mousedown(n("move")).css({cursor:"move",
position:"absolute",zIndex:360});ba.support&&r.bind("touchstart.jcrop",ba.createDragger("move"));Y.append(r);w();return{updateVisible:g,update:C,release:function(){w();E.hide();k.shade?ga.opacity(1):p(1);t=!1;k.onRelease.call(Z)},refresh:f,isAwake:function(){return t},setCursor:function(a){r.css("cursor",a)},enableHandles:m,enableOnly:function(){M=!0},showHandles:function(){M&&s.show()},disableHandles:w,animMode:v,setBgOpacity:p,done:function(){v(!1);f()}}}(),ca=function(){function b(a){g(d(a));return!1}
function c(b){b.preventDefault();b.stopPropagation();m&&(m=!1,C(d(b)),u.isAwake()&&k.onSelect.call(Z,h(F.getFixed())),O.css({zIndex:290}),a(document).unbind(".jcrop"),g=function(){},C=function(){});return!1}function e(a){g(d(ba.cfilter(a)));return!1}function f(a){return c(ba.cfilter(a))}var g=function(){},C=function(){},p=k.trackDocument;p||O.mousemove(b).mouseup(c).mouseout(c);q.before(O);return{activateHandlers:function(d,h,k){m=!0;g=d;C=h;O.css({zIndex:450});k?a(document).bind("touchmove.jcrop",
e).bind("touchend.jcrop",f):p&&a(document).bind("mousemove.jcrop",b).bind("mouseup.jcrop",c);return!1},setCursor:function(a){O.css("cursor",a)}}}(),ia=function(){function b(a){d.hide()}function c(a,b,e){k.allowMove&&(F.moveOffset([b,e]),u.updateVisible(!0));a.preventDefault();a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;var b=(ka=a.shiftKey?!0:!1)?10:1;switch(a.keyCode){case 37:c(a,-b,0);break;case 39:c(a,b,0);break;case 38:c(a,0,-b);break;case 40:c(a,0,b);break;case 27:k.allowSelect&&
u.release();break;case 9:return!0}return!1}var d=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),f=a("<div />").css({position:"absolute",overflow:"hidden"}).append(d);k.keySupport&&(d.keydown(e).blur(b),da||!k.fixedSupport?(d.css({position:"absolute",left:"-20px"}),f.append(d).insertBefore(q)):d.insertBefore(q));return{watchKeys:function(){k.keySupport&&(d.show(),d.focus())}}}();ba.support&&O.bind("touchstart.jcrop",ba.newSelection);s.hide();
w(!0);var Z={setImage:function(a,b){u.release();S();var c=new Image;c.onload=function(){var e=c.height,d=k.boxWidth,f=k.boxHeight;q.width(c.width).height(e);q.attr("src",a);X.attr("src",a);r(q,d,f);x=q.width();A=q.height();X.width(x).height(A);O.width(x+2*D).height(A+2*D);aa.width(x).height(A);ga.resize(x,A);Q();"function"===typeof b&&b.call(Z)};c.src=a},animateTo:function(a,b){var c=a[0]/C,e=a[1]/N,d=a[2]/C,f=a[3]/N;if(!ja){var h=F.flipCoords(c,e,d,f),g=F.getFixed(),p=[g.x,g.y,g.x2,g.y2],m=k.animationDelay,
l=h[0]-p[0],w=h[1]-p[1],v=h[2]-p[2],t=h[3]-p[3],q=0,n=k.swingSpeed,c=p[0],e=p[1],d=p[2],f=p[3];u.animMode(!0);var x=function(){return function(){q+=(100-q)/n;p[0]=Math.round(c+q/100*l);p[1]=Math.round(e+q/100*w);p[2]=Math.round(d+q/100*v);p[3]=Math.round(f+q/100*t);99.8<=q&&(q=100);100>q?(K(p),window.setTimeout(x,m)):(u.done(),u.animMode(!1),"function"===typeof b&&b.call(Z))}}();window.setTimeout(x,m)}},setSelect:J,setOptions:function(a){t(a);w()},tellSelect:function(){return h(F.getFixed())},tellScaled:function(){return F.getFixed()},
setClass:function(a){aa.removeClass().addClass(k.baseClass+"-holder").addClass(a)},disable:S,enable:Q,cancel:function(){u.done();ca.activateHandlers(null,null)},release:u.release,destroy:function(){aa.remove();z.show();z.css("visibility","visible");a(f).removeData("Jcrop")},focus:ia.watchKeys,getBounds:function(){return[x*C,A*N]},getWidgetSize:function(){return[x,A]},getScaleFactor:function(){return[C,N]},getOptions:function(){return k},ui:{holder:aa,selection:E}};W&&aa.bind("selectstart",function(){return!1});
z.data("Jcrop",Z);return Z};a.fn.Jcrop=function(f,g){var l;this.each(function(){if(a(this).data("Jcrop")){if("api"===f)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(f)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"});l=a.Jcrop(this,f);a.isFunction(g)&&g.call(l)}):(a(this).css({display:"block",visibility:"hidden"}),l=a.Jcrop(this,f),a.isFunction(g)&&g.call(l))});return this};a.Jcrop.Loader=function(f,g,l){function b(){t.complete?
(d.unbind(".jcloader"),a.isFunction(g)&&g.call(t)):window.setTimeout(b,50)}var d=a(f),t=d[0];d.bind("load.jcloader",b).bind("error.jcloader",function(b){d.unbind(".jcloader");a.isFunction(l)&&l.call(t)});t.complete&&a.isFunction(g)&&(d.unbind(".jcloader"),g.call(t))};a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:!1,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:"n s e w nw ne se sw".split(" "),
createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);(function(a){var f,g,l;function b(a){return String(null===a||void 0===a?"":a).replace(d,function(a){return M[a]})}var d,t,e,M,c,B,n=[],r=0,h,y,H;t={method:"GET",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,contentType:"json",prePopulate:null,processPrePopulate:!1,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&#215;",animateDropdown:!0,placeholder:null,theme:null,zindex:999,resultsLimit:null,enableHTML:!1,
resultsFormatter:function(a){a=a[this.propertyToSearch];return"<li>"+(this.enableHTML?a:b(a))+"</li>"},tokenFormatter:function(a){a=a[this.propertyToSearch];return"<li><p>"+(this.enableHTML?a:b(a))+"</p></li>"},tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",allowFreeTagging:!1,allowTabOut:!1,onSelectFirstResult:!1,onResult:null,onCachedResult:null,onAdd:null,onFreeTaggingAdd:null,onDelete:null,onReady:null,idPrefix:"token-input-",disabled:!1};e={tokenList:"token-input-list",
token:"token-input-token",tokenReadOnly:"token-input-token-readonly",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token",focused:"token-input-focused",disabled:"token-input-disabled"};f=0;g=1;l=2;d=/[&<>"'\/]/g;
M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};B={init:function(b,c){var e=a.extend({},t,c||{});return this.each(function(){a(this).data("settings",e);a(this).data("tokenInputObject",new a.TokenList(this,b,e))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(a){this.data("tokenInputObject").add(a);return this},remove:function(a){this.data("tokenInputObject").remove(a);return this},get:function(){return this.data("tokenInputObject").getTokens()},
toggleDisabled:function(a){this.data("tokenInputObject").toggleDisabled(a);return this},setOptions:function(b){a(this).data("settings",a.extend({},a(this).data("settings"),b||{}));return this},destroy:function(){if(this.data("tokenInputObject")){this.data("tokenInputObject").clear();var a=this.parent();a.empty();this.show();a.append(this);return this}}};a.fn.tokenInput=function(a){return B[a]?B[a].apply(this,Array.prototype.slice.call(arguments,1)):B.init.apply(this,arguments)};a.TokenList=function(d,
t,M){function B(b){c.disabled="boolean"===typeof b?b:!c.disabled;s.attr("disabled",c.disabled);I.toggleClass(c.classes.disabled,c.disabled);D&&L(a(D),l);E.attr("disabled",c.disabled)}function S(){null!==c.tokenLimit&&r>=c.tokenLimit&&(s.hide(),z())}function Q(){if(H!==(H=s.val())){var a=I.width()-s.offset().left-I.offset().left;ea.html(b(H)||b(M.placeholder));s.width(Math.min(I.width(),Math.max(a,ea.width()+30)))}}function V(){var b=a.trim(s.val()).split(c.tokenDelimiter);a.each(b,function(b,e){if(e){a.isFunction(c.onFreeTaggingAdd)&&
(e=c.onFreeTaggingAdd.call(E,e));var d={};d[c.tokenValue]=d[c.propertyToSearch]=e;k(d)}})}function w(b){var e=a(c.tokenFormatter(b)),d=!0===b.readonly?!0:!1;d&&e.addClass(c.classes.tokenReadOnly);e.addClass(c.classes.token).insertBefore(U);d||a("<span>"+c.deleteText+"</span>").addClass(c.classes.tokenDelete).appendTo(e).click(function(){if(!c.disabled)return W(a(this).parent()),E.change(),!1});a.data(e.get(0),"tokeninput",b);n=n.slice(0,O).concat([b]).concat(n.slice(O));O++;da(n,E);r+=1;null!==c.tokenLimit&&
r>=c.tokenLimit&&(s.hide(),z());return e}function k(b){var e=c.onAdd;if(0<r&&c.preventDuplicates){var d=null;I.children().each(function(){var c=a(this),e=a.data(c.get(0),"tokeninput");if(e&&e[M.tokenValue]===b[M.tokenValue])return d=c,!1});if(d){P(d);U.insertAfter(d);Y(s);return}}s.width(0);if(null==c.tokenLimit||r<c.tokenLimit)w(b),s.attr("placeholder",null),S();s.val("");z();a.isFunction(e)&&e.call(E,b)}function P(a){c.disabled||(a.addClass(c.classes.selectedToken),D=a.get(0),s.val(""),z())}function L(a,
b){a.removeClass(c.classes.selectedToken);D=null;b===f?(U.insertBefore(a),O--):b===g?(U.insertAfter(a),O++):(U.appendTo(I),O=r);Y(s)}function W(b){var e=a.data(b.get(0),"tokeninput"),d=c.onDelete,f=b.prevAll().length;f>O&&f--;b.remove();D=null;Y(s);n=n.slice(0,f).concat(n.slice(f+1));0==n.length&&s.attr("placeholder",M.placeholder);f<O&&O--;da(n,E);r-=1;null!==c.tokenLimit&&(s.show().val(""),Y(s));"function"===typeof d&&d.call(E,e)}function da(b,e){var d=a.map(b,function(a){return"function"==typeof c.tokenValue?
c.tokenValue.call(this,a):a[c.tokenValue]});e.val(d.join(c.tokenDelimiter))}function z(){R.hide().empty();T=null}function p(){R.css({position:"absolute",top:I.offset().top+I.outerHeight(),left:I.offset().left,width:I.width(),"z-index":c.zindex}).show()}function ha(a,e){return a.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.replace(fa,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","gi"),function(a,e){return"<b>"+(c.enableHTML?e:b(e))+"</b>"})}function q(e,d){if(d&&d.length){R.empty();var f=a("<ul/>").appendTo(R);
f.on("mouseover",function(b){x(a(b.target).closest("li"))});f.on("mousedown",function(b){k(a(b.target).closest("li").data("tokeninput"));E.change();return!1});f.hide();c.resultsLimit&&d.length>c.resultsLimit&&(d=d.slice(0,c.resultsLimit));a.each(d,function(b,d){var h=c.resultsFormatter(d),h=h.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+d[c.propertyToSearch].replace(fa,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","g"),ha(d[c.propertyToSearch],e)),h=a(h).appendTo(f);b%2?h.addClass(c.classes.dropdownItem):h.addClass(c.classes.dropdownItem2);
0===b&&c.onSelectFirstResult&&x(h);a.data(h.get(0),"tokeninput",d)});p();c.animateDropdown?f.slideDown("fast"):f.show()}else c.noResultsText&&(R.html("<p>"+(c.enableHTML?c.noResultsText:b(c.noResultsText))+"</p>"),p())}function x(b){b&&(T&&(a(T).removeClass(c.classes.selectedDropdownItem),T=null),b.addClass(c.classes.selectedDropdownItem),T=b.get(0))}function A(){var e=s.val();e&&e.length&&(D&&L(a(D),g),e.length>=c.minChars?(c.searchingText&&(R.html("<p>"+(c.enableHTML?c.searchingText:b(c.searchingText))+
"</p>"),p()),clearTimeout(y),y=setTimeout(function(){aa(e)},c.searchDelay)):z())}function aa(b){var e=b+X(),d=h.get(e);if(d)"function"===typeof c.onCachedResult&&(d=c.onCachedResult.call(E,d)),q(b,d);else if(c.url){var d=X(),f={data:{}};-1<d.indexOf("?")?(d=d.split("?"),f.url=d[0],d=d[1].split("&"),a.each(d,function(a,b){var c=b.split("=");f.data[c[0]]=c[1]})):f.url=d;f.data[c.queryParam]=b;f.type=c.method;f.dataType=c.contentType;c.crossDomain&&(f.dataType="jsonp");f.success=function(a){h.add(e,
c.jsonContainer?a[c.jsonContainer]:a);"function"===typeof c.onResult&&(a=c.onResult.call(E,a));s.val()===b&&q(b,c.jsonContainer?a[c.jsonContainer]:a)};if(M.onSend)M.onSend(f);a.ajax(f)}else c.local_data&&(d=a.grep(c.local_data,function(a){return-1<a[c.propertyToSearch].toLowerCase().indexOf(b.toLowerCase())}),h.add(e,d),"function"===typeof c.onResult&&(d=c.onResult.call(E,d)),q(b,d))}function X(){var a=c.url;"function"===typeof c.url&&(a=c.url.call(c));return a}function Y(a){setTimeout(function(){a.focus()},
50)}c=a(d).data("settings");"string"===typeof t||"function"===typeof t?(c.url=t,t=X(),void 0===c.crossDomain&&"string"===typeof t&&(-1===t.indexOf("://")?c.crossDomain=!1:c.crossDomain=location.href.split(/\/+/g)[1]!==t.split(/\/+/g)[1])):"object"===typeof t&&(c.local_data=t);c.classes?c.classes=a.extend({},e,c.classes):c.theme?(c.classes={},a.each(e,function(a,b){c.classes[a]=b+"-"+c.theme})):c.classes=e;h=new a.TokenList.Cache;var s=a('<input type="text"  autocomplete="off" autocapitalize="off"/>').css({outline:"none"}).attr("id",
c.idPrefix+d.id).focus(function(){if(c.disabled)return!1;if((null===c.tokenLimit||c.tokenLimit!==r)&&c.hintText)R.html("<p>"+(c.enableHTML?c.hintText:b(c.hintText))+"</p>"),p();I.addClass(c.classes.focused)}).on("blur",function(b){b=a(b.target);z();c.allowFreeTagging&&V();b.val("");I.removeClass(c.classes.focused)}).bind("keyup keydown blur update",Q).on("keydown",function(b){var d,e;e=a(b.target);switch(b.keyCode){case 37:case 39:case 38:case 40:0===e.val().length?(d=U.prev(),e=U.next(),d.length&&
d.get(0)===D||e.length&&e.get(0)===D?37===b.keyCode||38===b.keyCode?L(a(D),f):L(a(D),g):(37===b.keyCode||38===b.keyCode)&&d.length?P(a(d.get(0))):(39===b.keyCode||40===b.keyCode)&&e.length&&P(a(e.get(0)))):(d=null,40===b.keyCode||39===b.keyCode?(d=a(R).find("li").first(),T&&(d=a(T).next())):(d=a(R).find("li").last(),T&&(d=a(T).prev())),d&&x(d));break;case 8:d=U.prev();if(0===e.val().length)return D?(W(a(D)),E.change()):d.length&&P(a(d.get(0))),!1;1===e.val().length?z():setTimeout(function(){A()},
5);break;case 9:case 13:case 108:case 188:if(T)k(a(T).data("tokeninput")),E.change();else{if(c.allowFreeTagging){if(c.allowTabOut&&""===a(this).val())return!0;V()}else if(a(this).val(""),c.allowTabOut)return!0;b.stopPropagation();b.preventDefault()}return!1;case 27:return z(),!0;default:String.fromCharCode(b.which)&&setTimeout(function(){A()},5)}});M.placeholder&&s.attr("placeholder",M.placeholder);var E=a(d).hide().val("");E.on("focus",function(){Y(s)}).on("blur",function(){s.blur();return E});var D=
null,O=0,T=null,I=a("<ul />").addClass(c.classes.tokenList).on("click",function(b){if((b=a(b.target).closest("li"))&&b.get(0)&&a.data(b.get(0),"tokeninput")){var c=D;D&&L(a(D),l);c===b.get(0)?L(b,l):P(b)}else D&&L(a(D),l),Y(s)}).on("mouseover",function(b){(b=a(b.target).closest("li"))&&D!==this&&b.addClass(c.classes.highlightedToken)}).on("mouseout",function(b){(b=a(b.target).closest("li"))&&D!==this&&b.removeClass(c.classes.highlightedToken)}).insertBefore(E),U=a("<li />").addClass(c.classes.inputToken).appendTo(I).append(s),
R=a("<div/>").addClass(c.classes.dropdown).appendTo("body").hide(),ea=a("<tester/>").insertAfter(s).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:s.css("fontSize"),fontFamily:s.css("fontFamily"),fontWeight:s.css("fontWeight"),letterSpacing:s.css("letterSpacing"),whiteSpace:"nowrap"});E.val("");d=c.prePopulate||E.data("pre");c.processPrePopulate&&a.isFunction(c.onResult)&&(d=c.onResult.call(E,d));d&&d.length&&a.each(d,function(a,b){w(b);S();s.attr("placeholder",null)});c.disabled&&
B(!0);a.isFunction(c.onReady)&&c.onReady.call();this.clear=function(){I.children("li").each(function(){0===a(this).children("input").length&&W(a(this))})};this.add=function(a){k(a)};this.remove=function(b){I.children("li").each(function(){if(0===a(this).children("input").length){var c=a(this).data("tokeninput"),d=!0,e;for(e in b)if(b[e]!==c[e]){d=!1;break}d&&W(a(this))}})};this.getTokens=function(){return n};this.toggleDisabled=function(a){B(a)};Q();var fa=RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]",
"g")};a.TokenList.Cache=function(b){var c=a.extend({max_size:500},b),d={},e=0;this.add=function(a,b){e>c.max_size&&(d={},e=0);d[a]||(e+=1);d[a]=b};this.get=function(a){return d[a]}}})(jQuery);(function(a){function f(b){var d=b||window.event,f=[].slice.call(arguments,1),e=0,g=0,c=0;b=a.event.fix(d);b.type="mousewheel";d.wheelDelta&&(e=d.wheelDelta/120);d.detail&&(e=-d.detail/3);c=e;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(c=0,g=-1*e);void 0!==d.wheelDeltaY&&(c=d.wheelDeltaY/120);void 0!==d.wheelDeltaX&&(g=-1*d.wheelDeltaX/120);f.unshift(b,e,g,c);return(a.event.dispatch||a.event.handle).apply(this,f)}var g=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var l=g.length;l;)a.event.fixHooks[g[--l]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=g.length;a;)this.addEventListener(g[--a],f,!1);else this.onmousewheel=f},teardown:function(){if(this.removeEventListener)for(var a=g.length;a;)this.removeEventListener(g[--a],f,!1);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);(function(a){var f={init:function(b){b=a.extend(!0,{set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,alwaysShowScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},
onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},b);return this.each(function(){var d=a(this);b.set_width&&d.css("width",b.set_width);b.set_height&&d.css("height",b.set_height);if(a(document).data("mCustomScrollbar-index")){var f=parseInt(a(document).data("mCustomScrollbar-index"));a(document).data("mCustomScrollbar-index",f+1)}else a(document).data("mCustomScrollbar-index","1");
d.wrapInner("<div class='mCustomScrollBox mCS-"+b.theme+"' id='mCSB_"+a(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+a(document).data("mCustomScrollbar-index"));var e=d.children(".mCustomScrollBox");b.horizontalScroll?(e.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />"),f=e.children(".mCSB_h_wrapper"),f.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:f.children().outerWidth(),
position:"relative"}).unwrap()):e.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var g=e.children(".mCSB_container");a.support.touch&&g.addClass("mCS_touch");g.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var f=e.children(".mCSB_scrollTools"),
c=f.children(".mCSB_draggerContainer").children(".mCSB_dragger");b.horizontalScroll?c.data("minDraggerWidth",c.width()):c.data("minDraggerHeight",c.height());b.scrollButtons.enable&&(b.horizontalScroll?f.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):f.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>"));e.bind("scroll",
function(){d.is(".mCS_disabled")||e.scrollTop(0).scrollLeft(0)});d.data({mCS_Init:!0,mCustomScrollbarIndex:a(document).data("mCustomScrollbar-index"),horizontalScroll:b.horizontalScroll,scrollInertia:b.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:b.mouseWheel,mouseWheelPixels:b.mouseWheelPixels,autoDraggerLength:b.autoDraggerLength,autoHideScrollbar:b.autoHideScrollbar,alwaysShowScrollbar:b.alwaysShowScrollbar,snapAmount:b.snapAmount,snapOffset:b.snapOffset,scrollButtons_enable:b.scrollButtons.enable,
scrollButtons_scrollType:b.scrollButtons.scrollType,scrollButtons_scrollSpeed:b.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:b.scrollButtons.scrollAmount,autoExpandHorizontalScroll:b.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:b.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:b.advanced.normalizeMouseWheelDelta,contentTouchScroll:b.contentTouchScroll,onScrollStart_Callback:b.callbacks.onScrollStart,onScroll_Callback:b.callbacks.onScroll,onTotalScroll_Callback:b.callbacks.onTotalScroll,
onTotalScrollBack_Callback:b.callbacks.onTotalScrollBack,onTotalScroll_Offset:b.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:b.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:b.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,
mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1});if(b.horizontalScroll)"none"!==d.css("max-width")&&!b.advanced.updateOnContentResize&&(b.advanced.updateOnContentResize=!0);else if("none"!==d.css("max-height")){var l=!1,f=parseInt(d.css("max-height"));0<=d.css("max-height").indexOf("%")&&(l=f,f=d.parent().height()*l/100);d.css("overflow","hidden");e.css("max-height",f)}d.mCustomScrollbar("update");if(b.advanced.updateOnBrowserResize){var n,r=a(window).width(),
h=a(window).height();a(window).bind("resize."+d.data("mCustomScrollbarIndex"),function(){n&&clearTimeout(n);n=setTimeout(function(){if(!d.is(".mCS_disabled")&&!d.is(".mCS_destroyed")){var b=a(window).width(),c=a(window).height();if(r!==b||h!==c)"none"!==d.css("max-height")&&l&&e.css("max-height",d.parent().height()*l/100),d.mCustomScrollbar("update"),r=b,h=c}},150)})}if(b.advanced.updateOnContentResize){var y=b.horizontalScroll?g.outerWidth():g.outerHeight();setInterval(function(){if(b.horizontalScroll){b.advanced.autoExpandHorizontalScroll&&
g.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:g.outerWidth(),position:"relative"}).unwrap();var a=g.outerWidth()}else a=g.outerHeight();a!=y&&(d.mCustomScrollbar("update"),y=a)},300)}})},update:function(){var b=a(this),d=b.children(".mCustomScrollBox"),f=d.children(".mCSB_container");f.removeClass("mCS_no_scrollbar");b.removeClass("mCS_disabled mCS_destroyed");d.scrollTop(0).scrollLeft(0);var e=d.children(".mCSB_scrollTools"),
g=e.children(".mCSB_draggerContainer"),c=g.children(".mCSB_dragger");if(b.data("horizontalScroll")){var l=e.children(".mCSB_buttonLeft"),n=e.children(".mCSB_buttonRight"),r=d.width();b.data("autoExpandHorizontalScroll")&&f.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:f.outerWidth(),position:"relative"}).unwrap();var h=f.outerWidth()}else var y=e.children(".mCSB_buttonUp"),H=e.children(".mCSB_buttonDown"),
v=d.height(),G=f.outerHeight();G>v&&!b.data("horizontalScroll")?(e.css("display","block"),r=g.height(),b.data("autoDraggerLength")&&(h=Math.round(v/G*r),e=c.data("minDraggerHeight"),h<=e?c.css({height:e}):h>=r-10?c.css({height:r-10}):c.css({height:h}),c.children(".mCSB_dragger_bar").css({"line-height":c.height()+"px"})),h=c.height(),b.data("scrollAmount",(G-v)/(r-h)).mCustomScrollbar("scrolling",d,f,g,c,y,H,l,n),d=Math.abs(f.position().top),b.mCustomScrollbar("scrollTo",d,{scrollInertia:0,trigger:"internal"})):
h>r&&b.data("horizontalScroll")?(e.css("display","block"),v=g.width(),b.data("autoDraggerLength")&&(G=Math.round(r/h*v),e=c.data("minDraggerWidth"),G<=e?c.css({width:e}):G>=v-10?c.css({width:v-10}):c.css({width:G})),G=c.width(),b.data("scrollAmount",(h-r)/(v-G)).mCustomScrollbar("scrolling",d,f,g,c,y,H,l,n),d=Math.abs(f.position().left),b.mCustomScrollbar("scrollTo",d,{scrollInertia:0,trigger:"internal"})):(d.unbind("mousewheel focusin"),b.data("horizontalScroll")?c.add(f).css("left",0):c.add(f).css("top",
0),b.data("alwaysShowScrollbar")?b.data("horizontalScroll")?b.data("horizontalScroll")&&c.css({width:g.width()}):c.css({height:g.height()}):(e.css("display","none"),f.addClass("mCS_no_scrollbar")),b.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}))},scrolling:function(b,d,f,e,l,c,B,n){function r(a,b,c,d){h.data("horizontalScroll")?h.mCustomScrollbar("scrollTo",e.position().left-b+d,{moveDragger:!0,trigger:"internal"}):h.mCustomScrollbar("scrollTo",e.position().top-a+c,{moveDragger:!0,trigger:"internal"})}
var h=a(this);if(!h.data("bindEvent_scrollbar_drag")){var y,H,v,G,J;a.support.pointer?(v="pointerdown",G="pointermove",J="pointerup"):a.support.msPointer&&(v="MSPointerDown",G="MSPointerMove",J="MSPointerUp");a.support.pointer||a.support.msPointer?(e.bind(v,function(b){b.preventDefault();h.data({on_drag:!0});e.addClass("mCSB_dragger_onDrag");var c=a(this),d=c.offset(),f=b.originalEvent.pageX-d.left;b=b.originalEvent.pageY-d.top;f<c.width()&&(0<f&&b<c.height()&&0<b)&&(y=b,H=f)}),a(document).bind(G+
"."+h.data("mCustomScrollbarIndex"),function(a){a.preventDefault();if(h.data("on_drag")){var b=e.offset();r(y,H,a.originalEvent.pageY-b.top,a.originalEvent.pageX-b.left)}}).bind(J+"."+h.data("mCustomScrollbarIndex"),function(a){h.data({on_drag:!1});e.removeClass("mCSB_dragger_onDrag")})):(e.bind("mousedown touchstart",function(b){b.preventDefault();b.stopImmediatePropagation();var c=a(this),d=c.offset(),f;"touchstart"===b.type?b=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:(h.data({on_drag:!0}),
e.addClass("mCSB_dragger_onDrag"));f=b.pageX-d.left;d=b.pageY-d.top;f<c.width()&&(0<f&&d<c.height()&&0<d)&&(y=d,H=f)}).bind("touchmove",function(b){b.preventDefault();b.stopImmediatePropagation();b=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0];var c=a(this).offset();r(y,H,b.pageY-c.top,b.pageX-c.left)}),a(document).bind("mousemove."+h.data("mCustomScrollbarIndex"),function(a){if(h.data("on_drag")){var b=e.offset();r(y,H,a.pageY-b.top,a.pageX-b.left)}}).bind("mouseup."+h.data("mCustomScrollbarIndex"),
function(a){h.data({on_drag:!1});e.removeClass("mCSB_dragger_onDrag")}));h.data({bindEvent_scrollbar_drag:!0})}if(a.support.touch&&h.data("contentTouchScroll")&&!h.data("bindEvent_content_touch")){var K,S,Q,V,w,k,P;d.bind("touchstart",function(b){b.stopImmediatePropagation();K=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0];S=a(this);Q=S.offset();w=K.pageX-Q.left;k=V=K.pageY-Q.top;P=w});d.bind("touchmove",function(b){b.preventDefault();b.stopImmediatePropagation();K=b.originalEvent.touches[0]||
b.originalEvent.changedTouches[0];S=a(this).parent();Q=S.offset();w=K.pageX-Q.left;V=K.pageY-Q.top;h.data("horizontalScroll")?h.mCustomScrollbar("scrollTo",P-w,{trigger:"internal"}):h.mCustomScrollbar("scrollTo",k-V,{trigger:"internal"})})}h.data("bindEvent_scrollbar_click")||(f.bind("click",function(b){var c=(b.pageY-f.offset().top)*h.data("scrollAmount"),d=a(b.target);h.data("horizontalScroll")&&(c=(b.pageX-f.offset().left)*h.data("scrollAmount"));(d.hasClass("mCSB_draggerContainer")||d.hasClass("mCSB_draggerRail"))&&
h.mCustomScrollbar("scrollTo",c,{trigger:"internal",scrollEasing:"draggerRailEase"})}),h.data({bindEvent_scrollbar_click:!0}));h.data("mouseWheel")&&!h.data("bindEvent_mousewheel")&&(b.bind("mousewheel",function(a,b){var c=h.data("mouseWheelPixels"),g=Math.abs(d.position().top),k=e.position().top,l=f.height()-e.height();h.data("normalizeMouseWheelDelta")&&(b=0>b?-1:1);"auto"===c&&(c=100+Math.round(h.data("scrollAmount")/2));h.data("horizontalScroll")&&(k=e.position().left,l=f.width()-e.width(),g=
Math.abs(d.position().left));if(0<b&&0!==k||0>b&&k!==l)a.preventDefault(),a.stopImmediatePropagation();h.mCustomScrollbar("scrollTo",g-b*c,{trigger:"internal"})}),h.data({bindEvent_mousewheel:!0}));if(h.data("scrollButtons_enable"))if("pixels"===h.data("scrollButtons_scrollType")){h.data("horizontalScroll")?(n.add(B).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",W,da),h.data({bindEvent_buttonsContinuous_x:!1}),h.data("bindEvent_buttonsPixels_x")||
(n.bind("click",function(a){a.preventDefault();L(Math.abs(d.position().left)+h.data("scrollButtons_scrollAmount"))}),B.bind("click",function(a){a.preventDefault();L(Math.abs(d.position().left)-h.data("scrollButtons_scrollAmount"))}),h.data({bindEvent_buttonsPixels_x:!0}))):(c.add(l).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",W,da),h.data({bindEvent_buttonsContinuous_y:!1}),h.data("bindEvent_buttonsPixels_y")||(c.bind("click",
function(a){a.preventDefault();L(Math.abs(d.position().top)+h.data("scrollButtons_scrollAmount"))}),l.bind("click",function(a){a.preventDefault();L(Math.abs(d.position().top)-h.data("scrollButtons_scrollAmount"))}),h.data({bindEvent_buttonsPixels_y:!0})));var L=function(a){e.data("preventAction")||(e.data("preventAction",!0),h.mCustomScrollbar("scrollTo",a,{trigger:"internal"}))}}else{if(h.data("horizontalScroll")){if(n.add(B).unbind("click"),h.data({bindEvent_buttonsPixels_x:!1}),!h.data("bindEvent_buttonsContinuous_x")){n.bind("mousedown touchstart MSPointerDown pointerdown",
function(a){a.preventDefault();var b=z();h.data({mCSB_buttonScrollRight:setInterval(function(){h.mCustomScrollbar("scrollTo",Math.abs(d.position().left)+b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var W=function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollRight"))};n.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",W);B.bind("mousedown touchstart MSPointerDown pointerdown",function(a){a.preventDefault();var b=z();h.data({mCSB_buttonScrollLeft:setInterval(function(){h.mCustomScrollbar("scrollTo",
Math.abs(d.position().left)-b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var da=function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollLeft"))};B.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",da);h.data({bindEvent_buttonsContinuous_x:!0})}}else c.add(l).unbind("click"),h.data({bindEvent_buttonsPixels_y:!1}),h.data("bindEvent_buttonsContinuous_y")||(c.bind("mousedown touchstart MSPointerDown pointerdown",function(a){a.preventDefault();
var b=z();h.data({mCSB_buttonScrollDown:setInterval(function(){h.mCustomScrollbar("scrollTo",Math.abs(d.position().top)+b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),c.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollDown"))}),l.bind("mousedown touchstart MSPointerDown pointerdown",function(a){a.preventDefault();var b=z();h.data({mCSB_buttonScrollUp:setInterval(function(){h.mCustomScrollbar("scrollTo",
Math.abs(d.position().top)-b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),l.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollUp"))}),h.data({bindEvent_buttonsContinuous_y:!0}));var z=function(){var a=h.data("scrollButtons_scrollSpeed");"auto"===h.data("scrollButtons_scrollSpeed")&&(a=Math.round((h.data("scrollInertia")+100)/40));return a}}h.data("autoScrollOnFocus")&&!h.data("bindEvent_focusin")&&
(b.bind("focusin",function(){b.scrollTop(0).scrollLeft(0);var c=a(document.activeElement);if(c.is("input,textarea,select,button,a[tabindex],area,object")){var e=d.position().top,f=c.position().top,g=b.height()-c.outerHeight();h.data("horizontalScroll")&&(e=d.position().left,f=c.position().left,g=b.width()-c.outerWidth());(0>e+f||e+f>g)&&h.mCustomScrollbar("scrollTo",f,{trigger:"internal"})}}),h.data({bindEvent_focusin:!0}));h.data("autoHideScrollbar")&&!h.data("alwaysShowScrollbar")&&!h.data("bindEvent_autoHideScrollbar")&&
(b.bind("mouseenter",function(a){b.addClass("mCS-mouse-over");g.showScrollbar.call(b.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(a){b.removeClass("mCS-mouse-over");"mouseleave"===a.type&&g.hideScrollbar.call(b.children(".mCSB_scrollTools"))}),h.data({bindEvent_autoHideScrollbar:!0}))},scrollTo:function(b,d){function f(a){if(e.data("mCustomScrollbarIndex"))switch(this.mcs={top:n.position().top,left:n.position().left,draggerTop:y.position().top,draggerLeft:y.position().left,
topPct:Math.round(100*Math.abs(n.position().top)/Math.abs(n.outerHeight()-B.height())),leftPct:Math.round(100*Math.abs(n.position().left)/Math.abs(n.outerWidth()-B.width()))},a){case "onScrollStart":e.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(e,this.mcs);break;case "whileScrolling":e.data("whileScrolling_Callback").call(e,this.mcs);break;case "onScroll":e.data("onScroll_Callback").call(e,this.mcs);break;case "onTotalScrollBack":e.data("onTotalScrollBack_Callback").call(e,this.mcs);
break;case "onTotalScroll":e.data("onTotalScroll_Callback").call(e,this.mcs)}}var e=a(this),l={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:e.data("scrollInertia"),scrollEasing:e.data("scrollEasing")};d=a.extend(l,d);var c,B=e.children(".mCustomScrollBox"),n=B.children(".mCSB_container"),r=B.children(".mCSB_scrollTools"),h=r.children(".mCSB_draggerContainer"),y=h.children(".mCSB_dragger"),l=draggerSpeed=d.scrollInertia,H,v,G,J;if(!n.hasClass("mCS_no_scrollbar")&&(e.data({mCS_trigger:d.trigger}),
e.data("mCS_Init")&&(d.callbacks=!1),b||0===b))"number"===typeof b?d.moveDragger?(c=b,b=e.data("horizontalScroll")?y.position().left*e.data("scrollAmount"):y.position().top*e.data("scrollAmount"),draggerSpeed=0):c=b/e.data("scrollAmount"):"string"===typeof b&&(c="top"===b?0:"bottom"===b&&!e.data("horizontalScroll")?n.outerHeight()-B.height():"left"===b?0:"right"===b&&e.data("horizontalScroll")?n.outerWidth()-B.width():"first"===b?e.find(".mCSB_container").find(":first"):"last"===b?e.find(".mCSB_container").find(":last"):
e.find(b),1===c.length?(b=e.data("horizontalScroll")?c.position().left:c.position().top,c=b/e.data("scrollAmount")):c=b=c),e.data("horizontalScroll")?(e.data("onTotalScrollBack_Offset")&&(v=-e.data("onTotalScrollBack_Offset")),e.data("onTotalScroll_Offset")&&(J=B.width()-n.outerWidth()+e.data("onTotalScroll_Offset")),0>c?(c=b=0,clearInterval(e.data("mCSB_buttonScrollLeft")),v||(H=!0)):c>=h.width()-y.width()?(c=h.width()-y.width(),b=B.width()-n.outerWidth(),clearInterval(e.data("mCSB_buttonScrollRight")),
J||(G=!0)):b=-b,(h=e.data("snapAmount"))&&(b=Math.round(b/h)*h-e.data("snapOffset")),g.mTweenAxis.call(this,y[0],"left",Math.round(c),draggerSpeed,d.scrollEasing),g.mTweenAxis.call(this,n[0],"left",Math.round(b),l,d.scrollEasing,{onStart:function(){d.callbacks&&!e.data("mCS_tweenRunning")&&f("onScrollStart");e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&g.showScrollbar.call(r)},onUpdate:function(){d.callbacks&&f("whileScrolling")},onComplete:function(){d.callbacks&&(f("onScroll"),(H||
v&&n.position().left>=v)&&f("onTotalScrollBack"),(G||J&&n.position().left<=J)&&f("onTotalScroll"));y.data("preventAction",!1);e.data("mCS_tweenRunning",!1);e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&(B.hasClass("mCS-mouse-over")||g.hideScrollbar.call(r))}})):(e.data("onTotalScrollBack_Offset")&&(v=-e.data("onTotalScrollBack_Offset")),e.data("onTotalScroll_Offset")&&(J=B.height()-n.outerHeight()+e.data("onTotalScroll_Offset")),0>c?(c=b=0,clearInterval(e.data("mCSB_buttonScrollUp")),
v||(H=!0)):c>=h.height()-y.height()?(c=h.height()-y.height(),b=B.height()-n.outerHeight(),clearInterval(e.data("mCSB_buttonScrollDown")),J||(G=!0)):b=-b,(h=e.data("snapAmount"))&&(b=Math.round(b/h)*h-e.data("snapOffset")),g.mTweenAxis.call(this,y[0],"top",Math.round(c),draggerSpeed,d.scrollEasing),g.mTweenAxis.call(this,n[0],"top",Math.round(b),l,d.scrollEasing,{onStart:function(){d.callbacks&&!e.data("mCS_tweenRunning")&&f("onScrollStart");e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&
g.showScrollbar.call(r)},onUpdate:function(){d.callbacks&&f("whileScrolling")},onComplete:function(){d.callbacks&&(f("onScroll"),(H||v&&n.position().top>=v)&&f("onTotalScrollBack"),(G||J&&n.position().top<=J)&&f("onTotalScroll"));y.data("preventAction",!1);e.data("mCS_tweenRunning",!1);e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&(B.hasClass("mCS-mouse-over")||g.hideScrollbar.call(r))}})),e.data("mCS_Init")&&e.data({mCS_Init:!1})},stop:function(){var b=a(this),d=b.children().children(".mCSB_container"),
b=b.children().children().children().children(".mCSB_dragger");g.mTweenAxisStop.call(this,d[0]);g.mTweenAxisStop.call(this,b[0])},disable:function(b){var d=a(this),f=d.children(".mCustomScrollBox"),e=f.children(".mCSB_container"),g=f.children(".mCSB_scrollTools"),c=g.children().children(".mCSB_dragger");f.unbind("mousewheel focusin mouseenter mouseleave touchend");e.unbind("touchstart touchmove");b&&(d.data("horizontalScroll")?c.add(e).css("left",0):c.add(e).css("top",0));g.css("display","none");
e.addClass("mCS_no_scrollbar");d.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var b=a(this);b.removeClass("mCustomScrollbar _mCS_"+b.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove();a(document).unbind("mousemove."+b.data("mCustomScrollbarIndex")+" mouseup."+b.data("mCustomScrollbarIndex")+
" MSPointerMove."+b.data("mCustomScrollbarIndex")+" MSPointerUp."+b.data("mCustomScrollbarIndex"));a(window).unbind("resize."+b.data("mCustomScrollbarIndex"))}},g={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(a,d,f,e,g,c){function l(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?
Date.now():(new Date).getTime()}function n(){K||y.call();K=l()-G;r();K>=a._time&&(a._time=K>a._time?K+J-(K-a._time):K+J-1,a._time<K+1&&(a._time=K+1));a._time<e?a._id=_request(n):v.call()}function r(){0<e?(a.currVal=h(a._time,S,V,e,g),Q[d]=Math.round(a.currVal)+"px"):Q[d]=f+"px";H.call()}function h(a,b,c,d,e){switch(e){case "linear":return c*a/d+b;case "easeOutQuad":return a/=d,-c*a*(a-2)+b;case "easeInOutQuad":a/=d/2;if(1>a)return c/2*a*a+b;a--;return-c/2*(a*(a-2)-1)+b;case "easeOutCubic":return a/=
d,a--,c*(a*a*a+1)+b;case "easeOutQuart":return a/=d,a--,-c*(a*a*a*a-1)+b;case "easeOutQuint":return a/=d,a--,c*(a*a*a*a*a+1)+b;case "easeOutCirc":return a/=d,a--,c*Math.sqrt(1-a*a)+b;case "easeOutSine":return c*Math.sin(a/d*(Math.PI/2))+b;case "easeOutExpo":return c*(-Math.pow(2,-10*a/d)+1)+b;case "mcsEaseOut":return d=(a/=d)*a,e=d*a,b+c*(0.499999999999997*e*d+-2.5*d*d+5.5*e+-6.5*d+4*a);case "draggerRailEase":a/=d/2;if(1>a)return c/2*a*a*a+b;a-=2;return c/2*(a*a*a+2)+b}}c=c||{};var y=c.onStart||function(){},
H=c.onUpdate||function(){},v=c.onComplete||function(){},G=l(),J,K=0,S=a.offsetTop,Q=a.style;"left"===d&&(S=a.offsetLeft);var V=f-S;null!=a._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(a._id):clearTimeout(a._id),a._id=null);(function(){J=1E3/60;a._time=K+J;_request=!window.requestAnimationFrame?function(a){r();return setTimeout(a,0.01)}:window.requestAnimationFrame;a._id=_request(n)})()},mTweenAxisStop:function(a){null!=a._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(a._id):
clearTimeout(a._id),a._id=null)},rafPolyfill:function(){for(var a=["ms","moz","webkit","o"],d=a.length;-1<--d&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[a[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[d]+"CancelAnimationFrame"]||window[a[d]+"CancelRequestAnimationFrame"]}};g.rafPolyfill.call();a.support.touch=!!("ontouchstart"in window);a.support.pointer=window.navigator.pointerEnabled;a.support.msPointer=window.navigator.msPointerEnabled;var l="https:"==
document.location.protocol?"https:":"http:";a.event.special.mousewheel||document.write('<script src="'+l+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js">\x3c/script>');a.fn.mCustomScrollbar=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return f.init.apply(this,arguments);a.error("Method "+b+" does not exist")}})(jQuery);$(document).on("click",".ss-link",function(){window.location.href=this.getAttribute("data-ss-link")});$.fn.text_multiline=function(a){this.text(a);this.html(this.html().replace(/\n/g,"<br/>"));return this};$(document).on("click",".ss-modal-bg",function(){$.ssModal({action:"try_close"})});$(document).on("keyup",function(a){27==a.keyCode&&$.ssModal({action:"try_close"})});
(function(a){a.ssModal=function(f){var g=a.extend({modalId:"0",canBeClosed:1,action:"open",complete:function(){}},f);"open"===g.action?a.ssModal({action:"close",complete:function(){a("#ss-modal-"+g.modalId).fadeIn({duration:1E3});a(".ss-modal-bg").data("can_be_closed",g.canBeClosed).fadeIn({duration:1E3,complete:g.complete})}}):"close"===g.action?(a(".ss-modal").fadeOut({duration:1E3}),a(".ss-modal-bg").fadeOut({duration:1E3,complete:g.complete})):"try_close"===g.action&&(f=a(".ss-modal-bg"),f.data("can_be_closed")&&
1==f.data("can_be_closed")&&a.ssModal({action:"close"}))}})(jQuery);function dateToString(a){var f=a.getDate(),g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],l=a.getFullYear(),b=a.getHours();a=a.getMinutes();var d="AM";12<=b&&(b-=12,d="PM");0==b&&(b=12);return""+g+" "+(9>=f?"0"+f:f)+", "+l+" at "+(9>=b?"0"+b:b)+":"+(9>=a?"0"+a:a)+" "+d}
function convert_time(){$(".time-ago").each(function(){if(""==this.getAttribute("data-time"))return!0;var a=new Date(1E3*this.getAttribute("data-time")),f=Math.round((new Date-a)/1E3);0>f?(f=0-f,60>f?$(this).html("in a few seconds"):(f=Math.floor(f/60),10>f?$(this).html("in about "+f+" minutes"):$(this).html(dateToString(a)))):60>f?$(this).html("a few seconds ago"):(f=Math.floor(f/60),60>f?$(this).html("about "+f+" minute"+(1<f?"s":"")+" ago"):(f=Math.floor(f/60),24>f?$(this).html("about "+f+" hours ago"):
$(this).html(dateToString(a))))})}convert_time();var convert_time_internval=setInterval(convert_time,6E4);$(document).on("click",".page-tab",function(){var a=".page-tab-"+this.getAttribute("data-ss-tab");$(".page-tab").removeClass("is-active");$(this).addClass("is-active");$(".page-tab-component").hide();$(a).show()});$(document).on("click",".ss-photo",function(){console.log("--Expand photo")});
$(document).on("change",".ss-picture-upload",function(){var a=this;if(a.files&&a.files[0]){var f=a.files[0];if(!f.type.match(/image.*/))return!1;var g=new FileReader;g.onload=function(f){var b=$(a).parents(".ss-file-wrapper").siblings(".ss-picture-preview");f=$("<img/>").attr("src",f.target.result);b.html(f).show();f.Jcrop({aspectRatio:1,minSize:[50,50],setSelect:[100,100,50,50],onSelect:function(a){$('input[name="profile_x"]').val(a.x);$('input[name="profile_y"]').val(a.y);$('input[name="profile_w"]').val(a.w);
$('input[name="profile_h"]').val(a.h)}})};g.readAsDataURL(f)}});$(document).on("click",".thumb-up",function(){var a=$(this).children(".thumb-up-count"),f=$(this).siblings(".thumb-down").children(".thumb-down-count"),g=this.getAttribute("data-pid");$.ajax({url:"/ajax/post/save_thumb",method:"POST",data:{type:"up",id:g}}).done(function(g){0==g.result?(f.text(parseInt(f.text())-1),a.text(parseInt(a.text())+1)):1==g.result&&a.text(parseInt(a.text())+1)})});
$(document).on("click",".thumb-down",function(){var a=$(this).children(".thumb-down-count"),f=$(this).siblings(".thumb-up").children(".thumb-up-count"),g=this.getAttribute("data-pid");$.ajax({url:"/ajax/post/save_thumb",method:"POST",data:{type:"down",id:g}}).done(function(g){0==g.result?(a.text(parseInt(a.text())+1),f.text(parseInt(f.text())-1)):1==g.result&&a.text(parseInt(a.text())+1)})});$(document).on("change",'[name="user_photos[]"]',function(){var a=new FormData;for(i=0;i<this.files.length;i++)a.append("user_photos[]",this.files[i]);$.ajax({url:"/ajax/user/upload_photos",type:"POST",data:a,processData:!1,contentType:!1,dataType:"json"}).done(function(a){console.log(a)})});
$(document).on("mouseenter",".ss-photo",function(){$(this).children(".ss-photo-hover").fadeIn();$(this).children(".ss-photo-delete").fadeIn()}).on("mouseleave",".ss-photo",function(){$(this).children(".ss-photo-hover").fadeOut();$(this).children(".ss-photo-delete").fadeOut()});$(document).on("click",".ss-photo-delete",function(a){a.stopPropagation();a=this.getAttribute("data-ss-photo-id");$.ajax({url:"/ajax/user/delete_photo",type:"POST",data:{id:a}}).done(function(a){console.log(a)})});$("#right-calendar").datepicker();
$(".ss-search-anything").autocomplete({minLength:1,source:function(a,f){$.ajax({url:"/ajax/search",data:{search:a.term},dataType:"json",type:"GET",success:function(a){f(a)}})},select:function(a,f){a.preventDefault();window.location.href="/"+f.item.type.toLowerCase()+"/"+f.item.id}}).data("ui-autocomplete")._renderItem=function(a,f){var g='<a class="ss-search-result">';""!=f.profile_picture&&(g+='<div class="profile-picture ss-search-result-img"><img src="'+f.profile_picture+'" width="50" /></div>');
g=g+'<div class="ss-search-result-content">'+(f.name+"<br />");if("Group"==f.type||"Classroom"==f.type)g+='<span class="ss-search-result-data"><span class="bold">'+f.data+"</span> members</span>";if(("Highschool"==f.type||"University"==f.type||"User"==f.type)&&f.data)g+='<span class="ss-search-result-data">'+f.data+"</span>";g+="</div>";g+='<div class="clear"></div>';g+="</a>";return $("<li>").append(g).appendTo(a)};$(".ss-search-anything").autocomplete("widget").addClass("ss-search-ul");$(".classroom-autocomplete").autocomplete({minLength:1,source:function(a,f){$.ajax({url:"/ajax/classroom/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){f(a)}})},select:function(a,f){a.preventDefault();window.location.href="/classroom/"+f.item.id}});for(i=0;i<$(".classroom-autocomplete").length;i++)$($(".classroom-autocomplete")[i]).data("ui-autocomplete")._renderItem=function(a,f){return $("<li>").append("<a>"+f.name+"</a>").appendTo(a)};
$(".group-autocomplete").autocomplete({minLength:1,source:function(a,f){$.ajax({url:"/ajax/group/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){f(a)}})},select:function(a,f){a.preventDefault();window.location.href="/group/"+f.item.id}});for(i=0;i<$(".group-autocomplete").length;i++)$($(".group-autocomplete")[i]).data("ui-autocomplete")._renderItem=function(a,f){return $("<li>").append("<a>"+f.name+"</a>").appendTo(a)};
$(".create-classroom").click(function(){window.location.href="/classroom/create?name="+encodeURIComponent($(".classroom-autocomplete").val())});$(".create-group").click(function(){window.location.href="/group/create?name="+encodeURIComponent($(".group-autocomplete").val())});$(".page-settings").on("click",".ss-delete",function(){var a=this.getAttribute("data-ss-id");$.ajax({url:"/ajax/settings/delete_education",type:"POST",data:{id:a}}).done(function(a){});$(this).parents("tr").remove()});$(".page-settings").on("click",".ss-add-education",function(){var a=$(".hide.snippet-add-education").clone().removeClass("hide"),a=$("<tr></tr>").append($("<td></td>").append(a));$(".ss-table-education").prepend(a);update_autocomplete_my_profile()});
$(".page-settings").on("change",'select[name="type[]"]',function(){var a=$(this).siblings('input[name="name[]"]');a.val("");a.removeClass("university-autocomplete");a.removeClass("highschool-autocomplete");"highschool"==this.value?a.addClass("highschool-autocomplete"):a.addClass("university-autocomplete");$(this).siblings('input[name="education_id[]"]').val("0");update_autocomplete_my_profile()});
function update_autocomplete_my_profile(){$(".highschool-autocomplete").autocomplete({minLength:1,source:function(a,f){$.ajax({url:"/ajax/highschool/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){f(a)}})},select:function(a,f){a.preventDefault();$(this).val(f.item.name);$(this).siblings('input[name="education_id[]"]').val(f.item.id)}});for(i=0;i<$(".highschool-autocomplete").length;i++)$($(".highschool-autocomplete")[i]).data("ui-autocomplete")._renderItem=function(a,f){return $("<li>").append("<a>"+
f.name+'<br /><span style="font-size: 12px;">'+f.address+"</span></a>").appendTo(a)};$(".university-autocomplete").autocomplete({minLength:1,source:function(a,f){$.ajax({url:"/ajax/university/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){f(a)}})},select:function(a,f){a.preventDefault();$(this).val(f.item.name);$(this).siblings('input[name="education_id[]"]').val(f.item.id)}});for(i=0;i<$(".university-autocomplete").length;i++)$($(".university-autocomplete")[i]).data("ui-autocomplete")._renderItem=
function(a,f){return $("<li>").append("<a>"+f.name+'<br /><span style="font-size: 12px;">'+f.address+"</span></a>").appendTo(a)};$(".major-autocomplete").autocomplete({minLength:1,source:function(a,f){$.ajax({url:"/ajax/major/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){f(a)}})},select:function(a,f){a.preventDefault();$(this).val(f.item.title);$(this).siblings('input[name="major_id[]"]').val(f.item.id)}});for(i=0;i<$(".major-autocomplete").length;i++)$($(".major-autocomplete")[i]).data("ui-autocomplete")._renderItem=
function(a,f){return $("<li>").append("<a>"+f.title+"</a>").appendTo(a)}};$(".page-settings").on("click",".cg-leave-button",function(){var a=this.getAttribute("data-cg-id"),f="/ajax/"+this.getAttribute("data-cg-type")+"/quit";$.ajax({url:f,type:"POST",data:{id:a}}).done(function(a){window.location.reload()})});$(".page-settings").on("click",".cg-join-button",function(){var a=this.getAttribute("data-cg-id"),f="/ajax/"+this.getAttribute("data-cg-type")+"/join";$.ajax({url:f,type:"POST",data:{id:a}}).done(function(a){window.location.reload()})});0!=$(".ss-complete-subjects").length&&$(".ss-complete-subjects").tokenInput("/ajax/settings/subjects",{hintText:"Start typing a subject ...",preventDuplicates:!0,prePopulate:current_user_subjects,onAdd:function(a){$.ajax({url:"/ajax/settings/add_subject",type:"POST",data:{id:a.id}}).done(function(a){})},onDelete:function(a){$.ajax({url:"/ajax/settings/delete_subject",type:"POST",data:{id:a.id}}).done(function(a){})}});
$(document).on("change",'[name="tc-available-now"]',function(){var a=0;$(this).is(":checked")&&(a=1);$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:"available",value:a}}).done(function(a){})});$(document).on("change",'[name="tc-bio"]',function(){$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:"bio",value:this.value}}).done(function(a){})});
$(document).on("change",'[name="tc-hourly-rate"]',function(){$('[name="tc-net-rate"]').val(parseInt(this.value)-parseInt(this.value)/10-1);$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:"price",value:this.value}}).done(function(a){})});$(document).on("click",".join-cg",function(){var a=this.getAttribute("data-what"),a="/ajax/"+a+"/join",f=this.getAttribute("data-id");$(this).hide();$.ajax({url:a,type:"POST",data:{id:f}}).done(function(a){$("h2.count-members").text(parseInt($("h2.count-members").text())+1)})});0!=$(".message-page").length&&($(window).resize(function(){var a=$(window).height()-200;$(".layout-sidebar-right .ss-container").height()>=a&&(a=$(".layout-sidebar-right .ss-container").height());$(".message-container-left").height(a);$(".message-container-main").height(a-100)}),$(window).load(function(){$(window).resize();$(".message-container-main, .message-container-left").mCustomScrollbar();$(".layout-main .message-container-main").mCustomScrollbar("scrollTo","bottom")}));
$(".layout-sidebar.message-page").on("click",".conversation-item",function(){var a=this.getAttribute("data-uid");$(".conversation-item").removeClass("is-selected");$(this).addClass("is-selected");$(".message-container-main .mCSB_container").html("");$(".message-send")[0].setAttribute("data-uid",a);$.ajax({url:"/ajax/messages/get_conversation",type:"GET",data:{uid:a}}).done(function(a){$.each(a,function(a,f){var b=$(".snippet-message").clone().removeClass("snippet-message");b.addClass(f.type+"-message");
$(".message-content p",b).text_multiline(f.message);$(".message-time",b)[0].setAttribute("data-time",f.created_at);$(".message-picture img",b)[0].setAttribute("src",f.message_picture);$(".message-container-main .mCSB_container").append(b);b.removeClass("hide")});convert_time();$(".layout-main .message-container-main").mCustomScrollbar("update");$(".layout-main .message-container-main").mCustomScrollbar("scrollTo","bottom")})});
$(".layout-main.message-page").on("click",".message-send",function(){var a=$(".message-new textarea"),f=$(this)[0].getAttribute("data-uid");a.val($.trim(a.val()));if(""!=a.val()){var g=$(".snippet-message").clone().removeClass("snippet-message");g.addClass("sent-message");$(".message-content p",g).text_multiline(a.val());$(".message-time",g)[0].setAttribute("data-time",Math.round(new Date/1E3));$(".message-container-main .mCSB_container").append(g);g.removeClass("hide");convert_time();$(".layout-main .message-container-main").mCustomScrollbar("update");
$(".layout-main .message-container-main").mCustomScrollbar("scrollTo","bottom");$.ajax({url:"/ajax/messages/send_message",type:"POST",data:{message:a.val(),uid:f}}).done(function(a){});a.val("")}});$(document).on("mouseenter",".friend",function(){$("span",this).fadeIn();$(".friend-hover",this).fadeIn()}).on("mouseleave",".friend",function(){$("span",this).fadeOut();$(".friend-hover",this).fadeOut()});$(document).on("click",".add-friend-button",function(){var a=this.getAttribute("data-uid");$(this).hide();$.ajax({url:"/ajax/friendship/send_request",type:"POST",data:{id:a}}).done(function(a){})});$("#ss-hire-date1").datepicker();$("#ss-hire-date2").datepicker();$("#ss-hire-date3").datepicker();
$(document).on("click","#ss-hire-send",function(){var a=$("#ss-hire-date1").datepicker("getDate");a.setHours(parseInt(12*$('select[name="ap1"]').val())+parseInt($('select[name="hour1"]').val()));a.setMinutes($('select[name="minute1"]').val());var f=$("#ss-hire-date2").datepicker("getDate");f.setHours(parseInt(12*$('select[name="ap2"]').val())+parseInt($('select[name="hour2"]').val()));f.setMinutes($('select[name="minute2"]').val());var g=$("#ss-hire-date3").datepicker("getDate");g.setHours(parseInt(12*
$('select[name="ap3"]').val())+parseInt($('select[name="hour3"]').val()));g.setMinutes($('select[name="minute3"]').val());$.ajax({url:"/ajax/user/hire",type:"POST",data:{hours:$("#ss-hire-hours").val(),tutor_id:user_view_id,description:$("#ss-hire-desc textarea").val(),time1_y:a.getUTCFullYear(),time1_m:a.getUTCMonth()+1,time1_d:a.getUTCDate(),time1_h:a.getUTCHours(),time1_min:a.getUTCMinutes(),time2_y:f.getUTCFullYear(),time2_m:f.getUTCMonth()+1,time2_d:f.getUTCDate(),time2_h:f.getUTCHours(),time2_min:f.getUTCMinutes(),
time3_y:g.getUTCFullYear(),time3_m:g.getUTCMonth()+1,time3_d:g.getUTCDate(),time3_h:g.getUTCHours(),time3_min:g.getUTCMinutes()}}).done(function(a){1===a.error?"hours"===a.error_type?console.log("1-4 hours"):"description"===a.error_type?console.log("provide description"):"time_check"===a.error_type?console.log("+ 3 hours"):"time_equal"===a.error_type?console.log("different time"):console.log("other"):console.log("everything ok")})});function header_close_extended(){$(".header-extended").each(function(){"none"!=$(this).css("display")&&$(this).animate({height:"toggle"})});"none"!=$(".header-settings-extended").css("display")&&$(".header-settings-extended").animate({height:"toggle"})}$(document).on("click",function(){header_close_extended()});
$(document).on("click",".header-settings-icon",function(a){"none"==$(".header-settings-extended").css("display")&&header_close_extended();$(".header-settings-extended").animate({height:"toggle"});a.stopPropagation()});$(document).on("click",".header-friend-icon",function(a){"none"==$(".header-friend-extended").css("display")&&header_close_extended();$(".header-friend-extended").animate({height:"toggle"});a.stopPropagation()});
$(document).on("click",".header-notif-icon",function(a){"none"==$(".header-notif-extended").css("display")&&header_close_extended();$(".header-notif-extended").animate({height:"toggle"});a.stopPropagation()});$(document).on("click",".header-chat-icon",function(a){"none"==$(".header-chat-extended").css("display")&&header_close_extended();$(".header-chat-extended").animate({height:"toggle"});a.stopPropagation()});
$(document).on("click",".accept-friendship-request",function(){var a=this.getAttribute("data-uid");$(this).parents(".header-extended-item").hide();$.ajax({url:"/ajax/friendship/accept_request",method:"POST",data:{id:a}}).done(function(a){})});$(document).on("click",".decline-friendship-request",function(){var a=this.getAttribute("data-uid");$(this).parents(".header-extended-item").hide();$.ajax({url:"/ajax/friendship/decline_request",method:"POST",data:{id:a}}).done(function(a){})});
