(function(a){var c,m,q={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:!0,tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",prePopulate:null,processPrePopulate:!1,idPrefix:"token-input-",resultsFormatter:function(a){return"<li>"+a[this.propertyToSearch]+"</li>"},tokenFormatter:function(a){return"<li><p>"+
a[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null},g={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"};c=0;m=1;var n=
{init:function(c,g){var b=a.extend({},q,g||{});return this.each(function(){a(this).data("tokenInputObject",new a.TokenList(this,c,b))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(a){this.data("tokenInputObject").add(a);return this},remove:function(a){this.data("tokenInputObject").remove(a);return this},get:function(){return this.data("tokenInputObject").getTokens()}};a.fn.tokenInput=function(a){return n[a]?n[a].apply(this,Array.prototype.slice.call(arguments,
1)):n.init.apply(this,arguments)};a.TokenList=function(u,v,b){function I(){null!==b.tokenLimit&&p>=b.tokenLimit&&(e.hide(),w())}function J(f){var d=b.tokenFormatter(f),d=a(d).addClass(b.classes.token).insertBefore(x);a("<span>"+b.deleteText+"</span>").addClass(b.classes.tokenDelete).appendTo(d).click(function(){B(a(this).parent());l.change();return!1});var k={id:f.id};k[b.propertyToSearch]=f[b.propertyToSearch];a.data(d.get(0),"tokeninput",f);r=r.slice(0,s).concat([k]).concat(r.slice(s));s++;K(r,
l);p+=1;null!==b.tokenLimit&&p>=b.tokenLimit&&(e.hide(),w());return d}function n(f){var d=b.onAdd;if(0<p&&b.preventDuplicates){var k=null;y.children().each(function(){var b=a(this),d=a.data(b.get(0),"tokeninput");if(d&&d.id===f.id)return k=b,!1});if(k){q(k);x.insertAfter(k);e.focus();return}}if(null==b.tokenLimit||p<b.tokenLimit)J(f),I();e.val("");w();a.isFunction(d)&&d.call(l,f)}function q(a){a.addClass(b.classes.selectedToken);h=a.get(0);e.val("");w()}function A(a,d){a.removeClass(b.classes.selectedToken);
h=null;d===c?(x.insertBefore(a),s--):d===m?(x.insertAfter(a),s++):(x.appendTo(y),s=p);e.focus()}function B(f){var d=a.data(f.get(0),"tokeninput"),k=b.onDelete,c=f.prevAll().length;c>s&&c--;f.remove();h=null;e.focus();r=r.slice(0,c).concat(r.slice(c+1));c<s&&s--;K(r,l);p-=1;null!==b.tokenLimit&&e.show().val("").focus();a.isFunction(k)&&k.call(l,d)}function K(f,d){var k=a.map(f,function(a){return a[b.tokenValue]});d.val(k.join(b.tokenDelimiter))}function w(){z.hide().empty();t=null}function C(){z.css({position:"absolute",
top:a(y).offset().top+a(y).outerHeight(),left:a(y).offset().left,zindex:999}).show()}function D(f,d){if(d&&d.length){z.empty();var k=a("<ul>").appendTo(z).mouseover(function(b){E(a(b.target).closest("li"))}).mousedown(function(b){n(a(b.target).closest("li").data("tokeninput"));l.change();return!1}).hide();a.each(d,function(d,c){var e=b.resultsFormatter(c),e=e.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+c[b.propertyToSearch]+")(?![^<>]*>)(?![^&;]+;)","g"),c[b.propertyToSearch].replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+
f+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")),e=a(e).appendTo(k);d%2?e.addClass(b.classes.dropdownItem):e.addClass(b.classes.dropdownItem2);0===d&&E(e);a.data(e.get(0),"tokeninput",c)});C();b.animateDropdown?k.slideDown("fast"):k.show()}else b.noResultsText&&(z.html("<p>"+b.noResultsText+"</p>"),C())}function E(f){f&&(t&&(a(t).removeClass(b.classes.selectedDropdownItem),t=null),f.addClass(b.classes.selectedDropdownItem),t=f.get(0))}function L(){var f=e.val().toLowerCase();f&&f.length&&(h&&A(a(h),
m),f.length>=b.minChars?(b.searchingText&&(z.html("<p>"+b.searchingText+"</p>"),C()),clearTimeout(M),M=setTimeout(function(){O(f)},b.searchDelay)):w())}function O(f){var d=f+F(),c=G.get(d);if(c)D(f,c);else if(b.url){var c=F(),g={data:{}};-1<c.indexOf("?")?(c=c.split("?"),g.url=c[0],c=c[1].split("&"),a.each(c,function(a,b){var f=b.split("=");g.data[f[0]]=f[1]})):g.url=c;g.data[b.queryParam]=f;g.type=b.method;g.dataType=b.contentType;b.crossDomain&&(g.dataType="jsonp");g.success=function(c){a.isFunction(b.onResult)&&
(c=b.onResult.call(l,c));G.add(d,b.jsonContainer?c[b.jsonContainer]:c);e.val().toLowerCase()===f&&D(f,b.jsonContainer?c[b.jsonContainer]:c)};a.ajax(g)}else b.local_data&&(c=a.grep(b.local_data,function(a){return-1<a[b.propertyToSearch].toLowerCase().indexOf(f.toLowerCase())}),a.isFunction(b.onResult)&&(c=b.onResult.call(l,c)),G.add(d,c),D(f,c))}function F(){var a=b.url;"function"==typeof b.url&&(a=b.url.call());return a}"string"===a.type(v)||"function"===a.type(v)?(b.url=v,v=F(),void 0===b.crossDomain&&
(-1===v.indexOf("://")?b.crossDomain=!1:b.crossDomain=location.href.split(/\/+/g)[1]!==v.split(/\/+/g)[1])):"object"===typeof v&&(b.local_data=v);b.classes?b.classes=a.extend({},g,b.classes):b.theme?(b.classes={},a.each(g,function(a,c){b.classes[a]=c+"-"+b.theme})):b.classes=g;var r=[],p=0,G=new a.TokenList.Cache,M,H,e=a('<input type="text"  autocomplete="off">').css({outline:"none"}).attr("id",b.idPrefix+u.id).focus(function(){if((null===b.tokenLimit||b.tokenLimit!==p)&&b.hintText)z.html("<p>"+b.hintText+
"</p>"),C()}).blur(function(){w();a(this).val("")}).bind("keyup keydown blur update",function(){if(H!==(H=e.val())){var a=H.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");N.html(a);e.width(N.width()+30)}}).keydown(function(b){var d,e;switch(b.keyCode){case 37:case 39:case 38:case 40:if(a(this).val())return d=null,d=40===b.keyCode||39===b.keyCode?a(t).next():a(t).prev(),d.length&&E(d),!1;d=x.prev();e=x.next();d.length&&d.get(0)===h||e.length&&e.get(0)===h?37===b.keyCode||
38===b.keyCode?A(a(h),c):A(a(h),m):(37===b.keyCode||38===b.keyCode)&&d.length?q(a(d.get(0))):(39===b.keyCode||40===b.keyCode)&&e.length&&q(a(e.get(0)));break;case 8:d=x.prev();if(a(this).val().length)1===a(this).val().length?w():setTimeout(function(){L()},5);else return h?(B(a(h)),l.change()):d.length&&q(a(d.get(0))),!1;break;case 9:case 13:case 108:case 188:if(t)return n(a(t).data("tokeninput")),l.change(),!1;break;case 27:return w(),!0;default:String.fromCharCode(b.which)&&setTimeout(function(){L()},
5)}}),l=a(u).hide().val("").focus(function(){e.focus()}).blur(function(){e.blur()}),h=null,s=0,t=null,y=a("<ul />").addClass(b.classes.tokenList).click(function(b){if((b=a(b.target).closest("li"))&&b.get(0)&&a.data(b.get(0),"tokeninput")){var c=h;h&&A(a(h),2);c===b.get(0)?A(b,2):q(b)}else h&&A(a(h),2),e.focus()}).mouseover(function(c){(c=a(c.target).closest("li"))&&h!==this&&c.addClass(b.classes.highlightedToken)}).mouseout(function(c){(c=a(c.target).closest("li"))&&h!==this&&c.removeClass(b.classes.highlightedToken)}).insertBefore(l),
x=a("<li />").addClass(b.classes.inputToken).appendTo(y).append(e),z=a("<div>").addClass(b.classes.dropdown).appendTo("body").hide(),N=a("<tester/>").insertAfter(e).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"});l.val("");u=b.prePopulate||l.data("pre");b.processPrePopulate&&a.isFunction(b.onResult)&&(u=b.onResult.call(l,u));u&&u.length&&a.each(u,
function(a,b){J(b);I()});a.isFunction(b.onReady)&&b.onReady.call();this.clear=function(){y.children("li").each(function(){0===a(this).children("input").length&&B(a(this))})};this.add=function(a){n(a)};this.remove=function(b){y.children("li").each(function(){if(0===a(this).children("input").length){var c=a(this).data("tokeninput"),e=!0,g;for(g in b)if(b[g]!==c[g]){e=!1;break}e&&B(a(this))}})};this.getTokens=function(){return r}};a.TokenList.Cache=function(c){var g=a.extend({max_size:500},c),b={},m=
0;this.add=function(a,c){m>g.max_size&&(b={},m=0);b[a]||(m+=1);b[a]=c};this.get=function(a){return b[a]}}})(jQuery);$(document).on("click",".ss-link",function(){window.location.href=this.getAttribute("data-ss-link")});$(document).on("click",".header-settings-icon",function(){$(".header-settings-extended").animate({height:"toggle"})});$(document).on("click",".page-tab",function(){var a=".page-tab-"+this.getAttribute("data-ss-tab");$(".page-tab").removeClass("is-active");$(this).addClass("is-active");$(".page-tab-component").hide();$(a).show()});function dateToString(a){var c=a.getDate(),m="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],q=a.getFullYear(),g=a.getHours();a=a.getMinutes();var n="AM";12<=g&&(g-=12,n="PM");0==g&&(g=12);return""+m+" "+(9>=c?"0"+c:c)+", "+q+" at "+(9>=g?"0"+g:g)+":"+(9>=a?"0"+a:a)+" "+n}
function convert_time(){$(".time-ago").each(function(){if(""==this.getAttribute("data-time"))return!0;var a=new Date(1E3*this.getAttribute("data-time")),c=Math.round((new Date-a)/1E3);0>c?(c=0-c,60>c?$(this).html("in a few seconds"):(c=Math.floor(c/60),10>c?$(this).html("in about "+c+" minutes"):$(this).html(dateToString(a)))):60>c?$(this).html("a few seconds ago"):(c=Math.floor(c/60),60>c?$(this).html("about "+c+" minute"+(1<c?"s":"")+" ago"):(c=Math.floor(c/60),24>c?$(this).html("about "+c+" hours ago"):
$(this).html(dateToString(a))))})}convert_time();var convert_time_internval=setInterval(convert_time,6E4);$("#right-calendar").datepicker();$(document).on("change",".page-settings .ss-picture-upload",function(){if(this.files&&this.files[0]){var a=this.files[0];if(!a.type.match(/image.*/))return!1;var c=new FileReader;c.onload=function(a){var c=$(".page-settings #ss-picture-preview");a=$("<img/>").attr("src",a.target.result);c.html(a).show();a.Jcrop({aspectRatio:1,minSize:[50,50],setSelect:[100,100,50,50],onSelect:function(a){$('input[name="profile_x"]').val(a.x);$('input[name="profile_y"]').val(a.y);$('input[name="profile_w"]').val(a.w);
$('input[name="profile_h"]').val(a.h)}})};c.readAsDataURL(a)}});$(document).on("click",".page-settings .ss-delete",function(){$(this).parents("tr").remove()});$(document).on("click",".page-settings .ss-add-education",function(){var a=$(".hide.snippet-add-education").clone().removeClass("hide"),a=$("<tr></tr>").append($("<td></td>").append(a));$(".ss-table-education").prepend(a)});
