(function(a){a.Jcrop=function(c,g){function l(a){return Math.round(a)+"px"}function b(b){b=a(b).offset();return[b.left,b.top]}function d(a){return[a.pageX-P[0],a.pageY-P[1]]}function m(b){"object"!==typeof b&&(b={});k=a.extend(k,b);a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!==typeof k[b]&&(k[b]=function(){})})}function e(a,c,d){P=b(u);ca.setCursor("move"===a?a:a+"-resize");if("move"===a)return ca.activateHandlers(f(c),w,d);c=E.getFixed();var e=z(a),g=E.getCorner(z(e));
E.setPressed(E.getCorner(e));E.setCurrent(g);ca.activateHandlers(x(a,c),w,d)}function x(a,b){return function(f){if(k.aspectRatio)switch(a){case "e":f[1]=b.y+1;break;case "w":f[1]=b.y+1;break;case "n":f[0]=b.x+1;break;case "s":f[0]=b.x+1}else switch(a){case "e":f[1]=b.y2;break;case "w":f[1]=b.y2;break;case "n":f[0]=b.x2;break;case "s":f[0]=b.x2}E.setCurrent(f);t.update()}}function f(a){var b=a;ia.watchKeys();return function(a){E.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;t.update()}}function z(a){switch(a){case "n":return"sw";
case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function q(a){return function(f){if(k.disabled||"move"===a&&!k.allowMove)return!1;P=b(u);K=!0;e(a,d(f));f.stopPropagation();f.preventDefault();return!1}}function r(a,b,f){var c=a.width(),d=a.height();c>b&&0<b&&(c=b,d=b/a.width()*a.height());d>f&&0<f&&(d=f,c=f/a.height()*a.width());B=a.width()/c;M=a.height()/d;a.width(c).height(d)}function h(a){return{x:a.x*
B,y:a.y*M,x2:a.x2*B,y2:a.y2*M,w:a.w*B,h:a.h*M}}function w(a){a=E.getFixed();a.w>k.minSelect[0]&&a.h>k.minSelect[1]?(t.enableHandles(),t.done()):t.release();ca.setCursor(k.allowSelect?"crosshair":"default")}function G(a){if(k.disabled||!k.allowSelect)return!1;K=!0;P=b(u);t.disableHandles();ca.setCursor("crosshair");var f=d(a);E.setPressed(f);t.update();ca.activateHandlers(n,w,"touch"===a.type.substring(0,5));ia.watchKeys();a.stopPropagation();a.preventDefault();return!1}function n(a){E.setCurrent(a);
t.update()}function F(){var b=a("<div></div>").addClass(k.baseClass+"-tracker");W&&b.css({opacity:0,backgroundColor:"white"});return b}function I(a){J([a[0]/B,a[1]/M,a[2]/B,a[3]/M]);k.onSelect.call(Z,h(E.getFixed()));t.enableHandles()}function J(a){E.setPressed([a[0],a[1]]);E.setCurrent([a[2],a[3]]);t.update()}function S(){k.disabled=!0;t.disableHandles();t.setCursor("default");ca.setCursor("default")}function Q(){k.disabled=!1;p()}function V(b,f,c){f=f||k.bgColor;k.bgFade&&a.fx.step.hasOwnProperty("backgroundColor")&&
k.fadeTime&&!c?b.animate({backgroundColor:f},{queue:!1,duration:k.fadeTime}):b.css("backgroundColor",f)}function p(a){k.allowResize?a?t.enableOnly():t.enableHandles():t.disableHandles();ca.setCursor(k.allowSelect?"crosshair":"default");t.setCursor(k.allowMove?"move":"default");k.hasOwnProperty("trueSize")&&(B=k.trueSize[0]/v,M=k.trueSize[1]/A);k.hasOwnProperty("setSelect")&&(I(k.setSelect),t.done(),delete k.setSelect);ha.refresh();k.bgColor!=T&&(V(k.shade?ha.getShades():aa,k.shade?k.shadeColor||k.bgColor:
k.bgColor),T=k.bgColor);H!=k.bgOpacity&&(H=k.bgOpacity,k.shade?ha.refresh():t.setBgOpacity(H));U=k.maxSize[0]||0;R=k.maxSize[1]||0;fa=k.minSize[0]||0;ga=k.minSize[1]||0;k.hasOwnProperty("outerImage")&&(u.attr("src",k.outerImage),delete k.outerImage);t.refresh()}var k=a.extend({},a.Jcrop.defaults),P,L=navigator.userAgent.toLowerCase(),W=/msie/.test(L),da=/msie [1-6]\./.test(L);"object"!==typeof c&&(c=a(c)[0]);"object"!==typeof g&&(g={});m(g);var L={border:"none",visibility:"visible",margin:0,padding:0,
position:"absolute",top:0,left:0},y=a(c),N=!0;if("IMG"==c.tagName){if(0!=y[0].width&&0!=y[0].height)y.width(y[0].width),y.height(y[0].height);else{var ea=new Image;ea.src=y[0].src;y.width(ea.width);y.height(ea.height)}var u=y.clone().removeAttr("id").css(L).show();u.width(y.width());u.height(y.height());y.after(u).hide()}else u=y.css(L).show(),N=!1,null===k.shade&&(k.shade=!0);r(u,k.boxWidth,k.boxHeight);var v=u.width(),A=u.height(),aa=a("<div />").width(v).height(A).addClass(k.baseClass+"-holder").css({position:"relative",
backgroundColor:k.bgColor}).insertAfter(y).append(u);k.addClass&&aa.addClass(k.addClass);var X=a("<div />"),Y=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),s=a("<div />").width("100%").height("100%").css("zIndex",320),D=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=E.getFixed();k.onDblClick.call(Z,a)}).insertBefore(u).append(Y,s);N&&(X=a("<img />").attr("src",u.attr("src")).css(L).width(v).height(A),Y.append(X));da&&
D.css({overflowY:"hidden"});var C=k.boundary,O=F().width(v+2*C).height(A+2*C).css({position:"absolute",top:l(-C),left:l(-C),zIndex:290}).mousedown(G),T=k.bgColor,H=k.bgOpacity,U,R,fa,ga,B,M,K,ja,ka;P=b(u);var ba=function(){function a(){var b={},f=["touchstart","touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<f.length;d++){var e=f[d],e="on"+e,g=e in c;g||(c.setAttribute(e,"return;"),g="function"==typeof c[e]);b[f[d]]=g}return b.touchstart&&b.touchend&&b.touchmove}catch(k){return!1}}
var f;f=!0===k.touchSupport||!1===k.touchSupport?k.touchSupport:a();return{createDragger:function(a){return function(f){if(k.disabled||"move"===a&&!k.allowMove)return!1;P=b(u);K=!0;e(a,d(ba.cfilter(f)),!0);f.stopPropagation();f.preventDefault();return!1}},newSelection:function(a){return G(ba.cfilter(a))},cfilter:function(a){a.pageX=a.originalEvent.changedTouches[0].pageX;a.pageY=a.originalEvent.changedTouches[0].pageY;return a},isSupported:a,support:f}}(),E=function(){function a(){if(!k.aspectRatio){var b=
g-d,h=m-e;U&&Math.abs(b)>U&&(g=0<b?d+U:d-U);R&&Math.abs(h)>R&&(m=0<h?e+R:e-R);ga/M&&Math.abs(h)<ga/M&&(m=0<h?e+ga/M:e-ga/M);fa/B&&Math.abs(b)<fa/B&&(g=0<b?d+fa/B:d-fa/B);0>d&&(g-=d,d-=d);0>e&&(m-=e,e-=e);0>g&&(d-=g,g-=g);0>m&&(e-=m,m-=m);g>v&&(b=g-v,d-=b,g-=b);m>A&&(b=m-A,e-=b,m-=b);d>v&&(b=d-A,m-=b,e-=b);e>A&&(b=e-A,m-=b,e-=b);return c(f(d,e,g,m))}var b=k.aspectRatio,h=k.minSize[0]/B,l=k.maxSize[0]/B,N=g-d,x=m-e,p=Math.abs(N),n=Math.abs(x);0===l&&(l=10*v);p/n<b?(p=m,n*=b,n=0>N?d-n:n+d,0>n?(n=0,p=
Math.abs((n-d)/b),p=0>x?e-p:p+e):n>v&&(n=v,p=Math.abs((n-d)/b),p=0>x?e-p:p+e)):(n=g,p/=b,p=0>x?e-p:e+p,0>p?(p=0,n=Math.abs((p-e)*b),n=0>N?d-n:n+d):p>A&&(p=A,n=Math.abs(p-e)*b,n=0>N?d-n:n+d));n>d?(n-d<h?n=d+h:n-d>l&&(n=d+l),p=p>e?e+(n-d)/b:e-(n-d)/b):n<d&&(d-n<h?n=d-h:d-n>l&&(n=d-l),p=p>e?e+(d-n)/b:e-(d-n)/b);0>n?(d-=n,n=0):n>v&&(d-=n-v,n=v);0>p?(e-=p,p=0):p>A&&(e-=p-A,p=A);return c(f(d,e,n,p))}function b(a){0>a[0]&&(a[0]=0);0>a[1]&&(a[1]=0);a[0]>v&&(a[0]=v);a[1]>A&&(a[1]=A);return[Math.round(a[0]),
Math.round(a[1])]}function f(a,b,d,e){var c=a,g=d,m=b,k=e;d<a&&(c=d,g=a);e<b&&(m=e,k=b);return[c,m,g,k]}function c(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var d=0,e=0,g=0,m=0,h,l;return{flipCoords:f,setPressed:function(a){a=b(a);g=d=a[0];m=e=a[1]},setCurrent:function(a){a=b(a);h=a[0]-g;l=a[1]-m;g=a[0];m=a[1]},getOffset:function(){return[h,l]},moveOffset:function(a){var b=a[0];a=a[1];0>d+b&&(b-=b+d);0>e+a&&(a-=a+e);A<m+a&&(a+=A-(m+a));v<g+b&&(b+=v-(g+b));d+=b;g+=b;e+=a;m+=
a},getCorner:function(b){var d=a();switch(b){case "ne":return[d.x2,d.y];case "nw":return[d.x,d.y];case "se":return[d.x2,d.y2];case "sw":return[d.x,d.y2]}},getFixed:a}}(),ha=function(){function b(){return d(E.getFixed())}function d(a){p.top.css({left:l(a.x),width:l(a.w),height:l(a.y)});p.bottom.css({top:l(a.y2),left:l(a.x),width:l(a.w),height:l(A-a.y2)});p.right.css({left:l(a.x2),width:l(v-a.x2)});p.left.css({width:l(a.x)})}function f(){return a("<div />").css({position:"absolute",backgroundColor:k.shadeColor||
k.bgColor}).appendTo(n)}function e(){B||(B=!0,n.insertBefore(u),b(),t.setBgOpacity(1,0,1),X.hide(),c(k.shadeColor||k.bgColor,1),t.isAwake()?m(k.bgOpacity,1):m(1,1))}function c(a,b){V(h(),a,b)}function g(){B&&(n.remove(),X.show(),B=!1,t.isAwake()?t.setBgOpacity(k.bgOpacity,1,1):(t.setBgOpacity(1,1,1),t.disableHandles()),V(aa,0,1))}function m(a,b){B&&(k.bgFade&&!b?n.animate({opacity:1-a},{queue:!1,duration:k.fadeTime}):n.css({opacity:1-a}))}function h(){return n.children()}var B=!1,n=a("<div />").css({position:"absolute",
zIndex:240,opacity:0}),p={top:f(),left:f().height(A),right:f().height(A),bottom:f()};return{update:b,updateRaw:d,getShades:h,setBgColor:c,enable:e,disable:g,resize:function(a,b){p.left.css({height:l(b)});p.right.css({height:l(b)})},refresh:function(){k.shade?e():g();t.isAwake()&&m(k.bgOpacity)},opacity:m}}(),t=function(){function b(d,f){var e=a("<div />").mousedown(q(d)).css({cursor:d+"-resize",position:"absolute",zIndex:f}).addClass("ord-"+d);ba.support&&e.bind("touchstart.jcrop",ba.createDragger(d));
s.append(e);return e}function d(a){var f;for(f=0;f<a.length;f++)b(a[f],M++).addClass("jcrop-dragbar")}function f(b){var d,e;for(e=0;e<b.length;e++){switch(b[e]){case "n":d="hline";break;case "s":d="hline bottom";break;case "e":d="vline right";break;case "w":d="vline"}var c=K,g=b[e],m=d,m=a("<div />").css({position:"absolute",opacity:k.borderOpacity}).addClass(k.baseClass+"-"+m);Y.append(m);c[g]=m}}function e(a){var d;for(d=0;d<a.length;d++){var f=z,c=a[d],g=k.handleSize,m=b(a[d],M++).css({opacity:k.handleOpacity}).addClass(k.baseClass+
"-handle");g&&m.width(g).height(g);f[c]=m}}function c(){var a=E.getFixed();E.setPressed([a.x,a.y]);E.setCurrent([a.x2,a.y2]);g()}function g(a){if(x)return m(a)}function m(a){var b=E.getFixed(),d=b.h;D.width(Math.round(b.w)).height(Math.round(d));var d=b.x,f=b.y;k.shade||X.css({top:l(-f),left:l(-d)});D.css({top:l(f),left:l(d)});k.shade&&ha.updateRaw(b);x||(D.show(),k.shade?ha.opacity(H):B(H,!0),x=!0);a?k.onSelect.call(Z,h(b)):k.onChange.call(Z,h(b))}function B(a,b,d){if(x||b)k.bgFade&&!d?u.animate({opacity:a},
{queue:!1,duration:k.fadeTime}):u.css("opacity",a)}function n(){v=!0;if(k.allowResize)return s.show(),!0}function p(){v=!1;s.hide()}function N(a){a?(ja=!0,p()):(ja=!1,n())}var x,M=370,K={},z={},v=!1;k.dragEdges&&a.isArray(k.createDragbars)&&d(k.createDragbars);a.isArray(k.createHandles)&&e(k.createHandles);k.drawBorders&&a.isArray(k.createBorders)&&f(k.createBorders);a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var ea=F().mousedown(q("move")).css({cursor:"move",
position:"absolute",zIndex:360});ba.support&&ea.bind("touchstart.jcrop",ba.createDragger("move"));Y.append(ea);p();return{updateVisible:g,update:m,release:function(){p();D.hide();k.shade?ha.opacity(1):B(1);x=!1;k.onRelease.call(Z)},refresh:c,isAwake:function(){return x},setCursor:function(a){ea.css("cursor",a)},enableHandles:n,enableOnly:function(){v=!0},showHandles:function(){v&&s.show()},disableHandles:p,animMode:N,setBgOpacity:B,done:function(){N(!1);c()}}}(),ca=function(){function b(a){g(d(a));
return!1}function f(b){b.preventDefault();b.stopPropagation();K&&(K=!1,m(d(b)),t.isAwake()&&k.onSelect.call(Z,h(E.getFixed())),O.css({zIndex:290}),a(document).unbind(".jcrop"),g=function(){},m=function(){});return!1}function e(a){g(d(ba.cfilter(a)));return!1}function c(a){return f(ba.cfilter(a))}var g=function(){},m=function(){},B=k.trackDocument;B||O.mousemove(b).mouseup(f).mouseout(f);u.before(O);return{activateHandlers:function(d,k,h){K=!0;g=d;m=k;O.css({zIndex:450});h?a(document).bind("touchmove.jcrop",
e).bind("touchend.jcrop",c):B&&a(document).bind("mousemove.jcrop",b).bind("mouseup.jcrop",f);return!1},setCursor:function(a){O.css("cursor",a)}}}(),ia=function(){function b(a){e.hide()}function d(a,b,f){k.allowMove&&(E.moveOffset([b,f]),t.updateVisible(!0));a.preventDefault();a.stopPropagation()}function f(a){if(a.ctrlKey||a.metaKey)return!0;var b=(ka=a.shiftKey?!0:!1)?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:k.allowSelect&&
t.release();break;case 9:return!0}return!1}var e=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(e);k.keySupport&&(e.keydown(f).blur(b),da||!k.fixedSupport?(e.css({position:"absolute",left:"-20px"}),c.append(e).insertBefore(u)):e.insertBefore(u));return{watchKeys:function(){k.keySupport&&(e.show(),e.focus())}}}();ba.support&&O.bind("touchstart.jcrop",ba.newSelection);s.hide();
p(!0);var Z={setImage:function(a,b){t.release();S();var d=new Image;d.onload=function(){var f=d.height,e=k.boxWidth,c=k.boxHeight;u.width(d.width).height(f);u.attr("src",a);X.attr("src",a);r(u,e,c);v=u.width();A=u.height();X.width(v).height(A);O.width(v+2*C).height(A+2*C);aa.width(v).height(A);ha.resize(v,A);Q();"function"===typeof b&&b.call(Z)};d.src=a},animateTo:function(a,b){var d=a[0]/B,f=a[1]/M,e=a[2]/B,c=a[3]/M;if(!ja){var g=E.flipCoords(d,f,e,c),m=E.getFixed(),h=[m.x,m.y,m.x2,m.y2],n=k.animationDelay,
p=g[0]-h[0],l=g[1]-h[1],x=g[2]-h[2],N=g[3]-h[3],K=0,q=k.swingSpeed,d=h[0],f=h[1],e=h[2],c=h[3];t.animMode(!0);var u=function(){return function(){K+=(100-K)/q;h[0]=Math.round(d+K/100*p);h[1]=Math.round(f+K/100*l);h[2]=Math.round(e+K/100*x);h[3]=Math.round(c+K/100*N);99.8<=K&&(K=100);100>K?(J(h),window.setTimeout(u,n)):(t.done(),t.animMode(!1),"function"===typeof b&&b.call(Z))}}();window.setTimeout(u,n)}},setSelect:I,setOptions:function(a){m(a);p()},tellSelect:function(){return h(E.getFixed())},tellScaled:function(){return E.getFixed()},
setClass:function(a){aa.removeClass().addClass(k.baseClass+"-holder").addClass(a)},disable:S,enable:Q,cancel:function(){t.done();ca.activateHandlers(null,null)},release:t.release,destroy:function(){aa.remove();y.show();y.css("visibility","visible");a(c).removeData("Jcrop")},focus:ia.watchKeys,getBounds:function(){return[v*B,A*M]},getWidgetSize:function(){return[v,A]},getScaleFactor:function(){return[B,M]},getOptions:function(){return k},ui:{holder:aa,selection:D}};W&&aa.bind("selectstart",function(){return!1});
y.data("Jcrop",Z);return Z};a.fn.Jcrop=function(c,g){var l;this.each(function(){if(a(this).data("Jcrop")){if("api"===c)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(c)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"});l=a.Jcrop(this,c);a.isFunction(g)&&g.call(l)}):(a(this).css({display:"block",visibility:"hidden"}),l=a.Jcrop(this,c),a.isFunction(g)&&g.call(l))});return this};a.Jcrop.Loader=function(c,g,l){function b(){m.complete?
(d.unbind(".jcloader"),a.isFunction(g)&&g.call(m)):window.setTimeout(b,50)}var d=a(c),m=d[0];d.bind("load.jcloader",b).bind("error.jcloader",function(b){d.unbind(".jcloader");a.isFunction(l)&&l.call(m)});m.complete&&a.isFunction(g)&&(d.unbind(".jcloader"),g.call(m))};a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:!1,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:"n s e w nw ne se sw".split(" "),
createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);(function(a){var c,g,l;function b(a){return String(null===a||void 0===a?"":a).replace(d,function(a){return x[a]})}var d,m,e,x,f,z,q=[],r=0,h,w,G;m={method:"GET",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,contentType:"json",prePopulate:null,processPrePopulate:!1,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&#215;",animateDropdown:!0,placeholder:null,theme:null,zindex:999,resultsLimit:null,enableHTML:!1,
resultsFormatter:function(a){a=a[this.propertyToSearch];return"<li>"+(this.enableHTML?a:b(a))+"</li>"},tokenFormatter:function(a){a=a[this.propertyToSearch];return"<li><p>"+(this.enableHTML?a:b(a))+"</p></li>"},tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",allowFreeTagging:!1,allowTabOut:!1,onSelectFirstResult:!1,onResult:null,onCachedResult:null,onAdd:null,onFreeTaggingAdd:null,onDelete:null,onReady:null,idPrefix:"token-input-",disabled:!1};e={tokenList:"token-input-list",
token:"token-input-token",tokenReadOnly:"token-input-token-readonly",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token",focused:"token-input-focused",disabled:"token-input-disabled"};c=0;g=1;l=2;d=/[&<>"'\/]/g;
x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};z={init:function(b,d){var f=a.extend({},m,d||{});return this.each(function(){a(this).data("settings",f);a(this).data("tokenInputObject",new a.TokenList(this,b,f))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(a){this.data("tokenInputObject").add(a);return this},remove:function(a){this.data("tokenInputObject").remove(a);return this},get:function(){return this.data("tokenInputObject").getTokens()},
toggleDisabled:function(a){this.data("tokenInputObject").toggleDisabled(a);return this},setOptions:function(b){a(this).data("settings",a.extend({},a(this).data("settings"),b||{}));return this},destroy:function(){if(this.data("tokenInputObject")){this.data("tokenInputObject").clear();var a=this.parent();a.empty();this.show();a.append(this);return this}}};a.fn.tokenInput=function(a){return z[a]?z[a].apply(this,Array.prototype.slice.call(arguments,1)):z.init.apply(this,arguments)};a.TokenList=function(d,
m,x){function z(b){f.disabled="boolean"===typeof b?b:!f.disabled;s.attr("disabled",f.disabled);H.toggleClass(f.classes.disabled,f.disabled);C&&L(a(C),l);D.attr("disabled",f.disabled)}function S(){null!==f.tokenLimit&&r>=f.tokenLimit&&(s.hide(),y())}function Q(){if(G!==(G=s.val())){var a=H.width()-s.offset().left-H.offset().left;fa.html(b(G)||b(x.placeholder));s.width(Math.min(H.width(),Math.max(a,fa.width()+30)))}}function V(){var b=a.trim(s.val()).split(f.tokenDelimiter);a.each(b,function(b,d){if(d){a.isFunction(f.onFreeTaggingAdd)&&
(d=f.onFreeTaggingAdd.call(D,d));var e={};e[f.tokenValue]=e[f.propertyToSearch]=d;k(e)}})}function p(b){var d=a(f.tokenFormatter(b)),e=!0===b.readonly?!0:!1;e&&d.addClass(f.classes.tokenReadOnly);d.addClass(f.classes.token).insertBefore(U);e||a("<span>"+f.deleteText+"</span>").addClass(f.classes.tokenDelete).appendTo(d).click(function(){if(!f.disabled)return W(a(this).parent()),D.change(),!1});a.data(d.get(0),"tokeninput",b);q=q.slice(0,O).concat([b]).concat(q.slice(O));O++;da(q,D);r+=1;null!==f.tokenLimit&&
r>=f.tokenLimit&&(s.hide(),y());return d}function k(b){var d=f.onAdd;if(0<r&&f.preventDuplicates){var e=null;H.children().each(function(){var d=a(this),f=a.data(d.get(0),"tokeninput");if(f&&f[x.tokenValue]===b[x.tokenValue])return e=d,!1});if(e){P(e);U.insertAfter(e);Y(s);return}}s.width(0);if(null==f.tokenLimit||r<f.tokenLimit)p(b),s.attr("placeholder",null),S();s.val("");y();a.isFunction(d)&&d.call(D,b)}function P(a){f.disabled||(a.addClass(f.classes.selectedToken),C=a.get(0),s.val(""),y())}function L(a,
b){a.removeClass(f.classes.selectedToken);C=null;b===c?(U.insertBefore(a),O--):b===g?(U.insertAfter(a),O++):(U.appendTo(H),O=r);Y(s)}function W(b){var d=a.data(b.get(0),"tokeninput"),e=f.onDelete,c=b.prevAll().length;c>O&&c--;b.remove();C=null;Y(s);q=q.slice(0,c).concat(q.slice(c+1));0==q.length&&s.attr("placeholder",x.placeholder);c<O&&O--;da(q,D);r-=1;null!==f.tokenLimit&&(s.show().val(""),Y(s));"function"===typeof e&&e.call(D,d)}function da(b,d){var e=a.map(b,function(a){return"function"==typeof f.tokenValue?
f.tokenValue.call(this,a):a[f.tokenValue]});d.val(e.join(f.tokenDelimiter))}function y(){R.hide().empty();T=null}function N(){R.css({position:"absolute",top:H.offset().top+H.outerHeight(),left:H.offset().left,width:H.width(),"z-index":f.zindex}).show()}function ea(a,d){return a.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(ga,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","gi"),function(a,d){return"<b>"+(f.enableHTML?d:b(d))+"</b>"})}function u(d,e){if(e&&e.length){R.empty();var c=a("<ul/>").appendTo(R);
c.on("mouseover",function(b){v(a(b.target).closest("li"))});c.on("mousedown",function(b){k(a(b.target).closest("li").data("tokeninput"));D.change();return!1});c.hide();f.resultsLimit&&e.length>f.resultsLimit&&(e=e.slice(0,f.resultsLimit));a.each(e,function(b,e){var g=f.resultsFormatter(e),g=g.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+e[f.propertyToSearch].replace(ga,"\\$&")+")(?![^<>]*>)(?![^&;]+;)","g"),ea(e[f.propertyToSearch],d)),g=a(g).appendTo(c);b%2?g.addClass(f.classes.dropdownItem):g.addClass(f.classes.dropdownItem2);
0===b&&f.onSelectFirstResult&&v(g);a.data(g.get(0),"tokeninput",e)});N();f.animateDropdown?c.slideDown("fast"):c.show()}else f.noResultsText&&(R.html("<p>"+(f.enableHTML?f.noResultsText:b(f.noResultsText))+"</p>"),N())}function v(b){b&&(T&&(a(T).removeClass(f.classes.selectedDropdownItem),T=null),b.addClass(f.classes.selectedDropdownItem),T=b.get(0))}function A(){var d=s.val();d&&d.length&&(C&&L(a(C),g),d.length>=f.minChars?(f.searchingText&&(R.html("<p>"+(f.enableHTML?f.searchingText:b(f.searchingText))+
"</p>"),N()),clearTimeout(w),w=setTimeout(function(){aa(d)},f.searchDelay)):y())}function aa(b){var d=b+X(),e=h.get(d);if(e)"function"===typeof f.onCachedResult&&(e=f.onCachedResult.call(D,e)),u(b,e);else if(f.url){var e=X(),c={data:{}};-1<e.indexOf("?")?(e=e.split("?"),c.url=e[0],e=e[1].split("&"),a.each(e,function(a,b){var d=b.split("=");c.data[d[0]]=d[1]})):c.url=e;c.data[f.queryParam]=b;c.type=f.method;c.dataType=f.contentType;f.crossDomain&&(c.dataType="jsonp");c.success=function(a){h.add(d,
f.jsonContainer?a[f.jsonContainer]:a);"function"===typeof f.onResult&&(a=f.onResult.call(D,a));s.val()===b&&u(b,f.jsonContainer?a[f.jsonContainer]:a)};if(x.onSend)x.onSend(c);a.ajax(c)}else f.local_data&&(e=a.grep(f.local_data,function(a){return-1<a[f.propertyToSearch].toLowerCase().indexOf(b.toLowerCase())}),h.add(d,e),"function"===typeof f.onResult&&(e=f.onResult.call(D,e)),u(b,e))}function X(){var a=f.url;"function"===typeof f.url&&(a=f.url.call(f));return a}function Y(a){setTimeout(function(){a.focus()},
50)}f=a(d).data("settings");"string"===typeof m||"function"===typeof m?(f.url=m,m=X(),void 0===f.crossDomain&&"string"===typeof m&&(-1===m.indexOf("://")?f.crossDomain=!1:f.crossDomain=location.href.split(/\/+/g)[1]!==m.split(/\/+/g)[1])):"object"===typeof m&&(f.local_data=m);f.classes?f.classes=a.extend({},e,f.classes):f.theme?(f.classes={},a.each(e,function(a,b){f.classes[a]=b+"-"+f.theme})):f.classes=e;h=new a.TokenList.Cache;var s=a('<input type="text"  autocomplete="off" autocapitalize="off"/>').css({outline:"none"}).attr("id",
f.idPrefix+d.id).focus(function(){if(f.disabled)return!1;if((null===f.tokenLimit||f.tokenLimit!==r)&&f.hintText)R.html("<p>"+(f.enableHTML?f.hintText:b(f.hintText))+"</p>"),N();H.addClass(f.classes.focused)}).on("blur",function(b){b=a(b.target);y();f.allowFreeTagging&&V();b.val("");H.removeClass(f.classes.focused)}).bind("keyup keydown blur update",Q).on("keydown",function(b){var d,e;e=a(b.target);switch(b.keyCode){case 37:case 39:case 38:case 40:0===e.val().length?(d=U.prev(),e=U.next(),d.length&&
d.get(0)===C||e.length&&e.get(0)===C?37===b.keyCode||38===b.keyCode?L(a(C),c):L(a(C),g):(37===b.keyCode||38===b.keyCode)&&d.length?P(a(d.get(0))):(39===b.keyCode||40===b.keyCode)&&e.length&&P(a(e.get(0)))):(d=null,40===b.keyCode||39===b.keyCode?(d=a(R).find("li").first(),T&&(d=a(T).next())):(d=a(R).find("li").last(),T&&(d=a(T).prev())),d&&v(d));break;case 8:d=U.prev();if(0===e.val().length)return C?(W(a(C)),D.change()):d.length&&P(a(d.get(0))),!1;1===e.val().length?y():setTimeout(function(){A()},
5);break;case 9:case 13:case 108:case 188:if(T)k(a(T).data("tokeninput")),D.change();else{if(f.allowFreeTagging){if(f.allowTabOut&&""===a(this).val())return!0;V()}else if(a(this).val(""),f.allowTabOut)return!0;b.stopPropagation();b.preventDefault()}return!1;case 27:return y(),!0;default:String.fromCharCode(b.which)&&setTimeout(function(){A()},5)}});x.placeholder&&s.attr("placeholder",x.placeholder);var D=a(d).hide().val("");D.on("focus",function(){Y(s)}).on("blur",function(){s.blur();return D});var C=
null,O=0,T=null,H=a("<ul />").addClass(f.classes.tokenList).on("click",function(b){if((b=a(b.target).closest("li"))&&b.get(0)&&a.data(b.get(0),"tokeninput")){var d=C;C&&L(a(C),l);d===b.get(0)?L(b,l):P(b)}else C&&L(a(C),l),Y(s)}).on("mouseover",function(b){(b=a(b.target).closest("li"))&&C!==this&&b.addClass(f.classes.highlightedToken)}).on("mouseout",function(b){(b=a(b.target).closest("li"))&&C!==this&&b.removeClass(f.classes.highlightedToken)}).insertBefore(D),U=a("<li />").addClass(f.classes.inputToken).appendTo(H).append(s),
R=a("<div/>").addClass(f.classes.dropdown).appendTo("body").hide(),fa=a("<tester/>").insertAfter(s).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:s.css("fontSize"),fontFamily:s.css("fontFamily"),fontWeight:s.css("fontWeight"),letterSpacing:s.css("letterSpacing"),whiteSpace:"nowrap"});D.val("");d=f.prePopulate||D.data("pre");f.processPrePopulate&&a.isFunction(f.onResult)&&(d=f.onResult.call(D,d));d&&d.length&&a.each(d,function(a,b){p(b);S();s.attr("placeholder",null)});f.disabled&&
z(!0);a.isFunction(f.onReady)&&f.onReady.call();this.clear=function(){H.children("li").each(function(){0===a(this).children("input").length&&W(a(this))})};this.add=function(a){k(a)};this.remove=function(b){H.children("li").each(function(){if(0===a(this).children("input").length){var d=a(this).data("tokeninput"),e=!0,f;for(f in b)if(b[f]!==d[f]){e=!1;break}e&&W(a(this))}})};this.getTokens=function(){return q};this.toggleDisabled=function(a){z(a)};Q();var ga=RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]",
"g")};a.TokenList.Cache=function(b){var d=a.extend({max_size:500},b),e={},f=0;this.add=function(a,b){f>d.max_size&&(e={},f=0);e[a]||(f+=1);e[a]=b};this.get=function(a){return e[a]}}})(jQuery);(function(a){function c(b){var d=b||window.event,c=[].slice.call(arguments,1),e=0,g=0,f=0;b=a.event.fix(d);b.type="mousewheel";d.wheelDelta&&(e=d.wheelDelta/120);d.detail&&(e=-d.detail/3);f=e;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(f=0,g=-1*e);void 0!==d.wheelDeltaY&&(f=d.wheelDeltaY/120);void 0!==d.wheelDeltaX&&(g=-1*d.wheelDeltaX/120);c.unshift(b,e,g,f);return(a.event.dispatch||a.event.handle).apply(this,c)}var g=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var l=g.length;l;)a.event.fixHooks[g[--l]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=g.length;a;)this.addEventListener(g[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=g.length;a;)this.removeEventListener(g[--a],c,!1);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);(function(a){var c={init:function(b){b=a.extend(!0,{set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,alwaysShowScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},
onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},b);return this.each(function(){var d=a(this);b.set_width&&d.css("width",b.set_width);b.set_height&&d.css("height",b.set_height);if(a(document).data("mCustomScrollbar-index")){var c=parseInt(a(document).data("mCustomScrollbar-index"));a(document).data("mCustomScrollbar-index",c+1)}else a(document).data("mCustomScrollbar-index","1");
d.wrapInner("<div class='mCustomScrollBox mCS-"+b.theme+"' id='mCSB_"+a(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+a(document).data("mCustomScrollbar-index"));var e=d.children(".mCustomScrollBox");b.horizontalScroll?(e.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />"),c=e.children(".mCSB_h_wrapper"),c.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:c.children().outerWidth(),
position:"relative"}).unwrap()):e.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var g=e.children(".mCSB_container");a.support.touch&&g.addClass("mCS_touch");g.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var c=e.children(".mCSB_scrollTools"),
f=c.children(".mCSB_draggerContainer").children(".mCSB_dragger");b.horizontalScroll?f.data("minDraggerWidth",f.width()):f.data("minDraggerHeight",f.height());b.scrollButtons.enable&&(b.horizontalScroll?c.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):c.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>"));e.bind("scroll",
function(){d.is(".mCS_disabled")||e.scrollTop(0).scrollLeft(0)});d.data({mCS_Init:!0,mCustomScrollbarIndex:a(document).data("mCustomScrollbar-index"),horizontalScroll:b.horizontalScroll,scrollInertia:b.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:b.mouseWheel,mouseWheelPixels:b.mouseWheelPixels,autoDraggerLength:b.autoDraggerLength,autoHideScrollbar:b.autoHideScrollbar,alwaysShowScrollbar:b.alwaysShowScrollbar,snapAmount:b.snapAmount,snapOffset:b.snapOffset,scrollButtons_enable:b.scrollButtons.enable,
scrollButtons_scrollType:b.scrollButtons.scrollType,scrollButtons_scrollSpeed:b.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:b.scrollButtons.scrollAmount,autoExpandHorizontalScroll:b.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:b.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:b.advanced.normalizeMouseWheelDelta,contentTouchScroll:b.contentTouchScroll,onScrollStart_Callback:b.callbacks.onScrollStart,onScroll_Callback:b.callbacks.onScroll,onTotalScroll_Callback:b.callbacks.onTotalScroll,
onTotalScrollBack_Callback:b.callbacks.onTotalScrollBack,onTotalScroll_Offset:b.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:b.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:b.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,
mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1});if(b.horizontalScroll)"none"!==d.css("max-width")&&!b.advanced.updateOnContentResize&&(b.advanced.updateOnContentResize=!0);else if("none"!==d.css("max-height")){var l=!1,c=parseInt(d.css("max-height"));0<=d.css("max-height").indexOf("%")&&(l=c,c=d.parent().height()*l/100);d.css("overflow","hidden");e.css("max-height",c)}d.mCustomScrollbar("update");if(b.advanced.updateOnBrowserResize){var q,r=a(window).width(),
h=a(window).height();a(window).bind("resize."+d.data("mCustomScrollbarIndex"),function(){q&&clearTimeout(q);q=setTimeout(function(){if(!d.is(".mCS_disabled")&&!d.is(".mCS_destroyed")){var b=a(window).width(),f=a(window).height();if(r!==b||h!==f)"none"!==d.css("max-height")&&l&&e.css("max-height",d.parent().height()*l/100),d.mCustomScrollbar("update"),r=b,h=f}},150)})}if(b.advanced.updateOnContentResize){var w=b.horizontalScroll?g.outerWidth():g.outerHeight();setInterval(function(){if(b.horizontalScroll){b.advanced.autoExpandHorizontalScroll&&
g.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:g.outerWidth(),position:"relative"}).unwrap();var a=g.outerWidth()}else a=g.outerHeight();a!=w&&(d.mCustomScrollbar("update"),w=a)},300)}})},update:function(){var b=a(this),d=b.children(".mCustomScrollBox"),c=d.children(".mCSB_container");c.removeClass("mCS_no_scrollbar");b.removeClass("mCS_disabled mCS_destroyed");d.scrollTop(0).scrollLeft(0);var e=d.children(".mCSB_scrollTools"),
g=e.children(".mCSB_draggerContainer"),f=g.children(".mCSB_dragger");if(b.data("horizontalScroll")){var l=e.children(".mCSB_buttonLeft"),q=e.children(".mCSB_buttonRight"),r=d.width();b.data("autoExpandHorizontalScroll")&&c.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:c.outerWidth(),position:"relative"}).unwrap();var h=c.outerWidth()}else var w=e.children(".mCSB_buttonUp"),G=e.children(".mCSB_buttonDown"),
n=d.height(),F=c.outerHeight();F>n&&!b.data("horizontalScroll")?(e.css("display","block"),r=g.height(),b.data("autoDraggerLength")&&(h=Math.round(n/F*r),e=f.data("minDraggerHeight"),h<=e?f.css({height:e}):h>=r-10?f.css({height:r-10}):f.css({height:h}),f.children(".mCSB_dragger_bar").css({"line-height":f.height()+"px"})),h=f.height(),b.data("scrollAmount",(F-n)/(r-h)).mCustomScrollbar("scrolling",d,c,g,f,w,G,l,q),d=Math.abs(c.position().top),b.mCustomScrollbar("scrollTo",d,{scrollInertia:0,trigger:"internal"})):
h>r&&b.data("horizontalScroll")?(e.css("display","block"),n=g.width(),b.data("autoDraggerLength")&&(F=Math.round(r/h*n),e=f.data("minDraggerWidth"),F<=e?f.css({width:e}):F>=n-10?f.css({width:n-10}):f.css({width:F})),F=f.width(),b.data("scrollAmount",(h-r)/(n-F)).mCustomScrollbar("scrolling",d,c,g,f,w,G,l,q),d=Math.abs(c.position().left),b.mCustomScrollbar("scrollTo",d,{scrollInertia:0,trigger:"internal"})):(d.unbind("mousewheel focusin"),b.data("horizontalScroll")?f.add(c).css("left",0):f.add(c).css("top",
0),b.data("alwaysShowScrollbar")?b.data("horizontalScroll")?b.data("horizontalScroll")&&f.css({width:g.width()}):f.css({height:g.height()}):(e.css("display","none"),c.addClass("mCS_no_scrollbar")),b.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}))},scrolling:function(b,d,c,e,l,f,z,q){function r(a,b,d,f){h.data("horizontalScroll")?h.mCustomScrollbar("scrollTo",e.position().left-b+f,{moveDragger:!0,trigger:"internal"}):h.mCustomScrollbar("scrollTo",e.position().top-a+d,{moveDragger:!0,trigger:"internal"})}
var h=a(this);if(!h.data("bindEvent_scrollbar_drag")){var w,G,n,F,I;a.support.pointer?(n="pointerdown",F="pointermove",I="pointerup"):a.support.msPointer&&(n="MSPointerDown",F="MSPointerMove",I="MSPointerUp");a.support.pointer||a.support.msPointer?(e.bind(n,function(b){b.preventDefault();h.data({on_drag:!0});e.addClass("mCSB_dragger_onDrag");var d=a(this),f=d.offset(),c=b.originalEvent.pageX-f.left;b=b.originalEvent.pageY-f.top;c<d.width()&&(0<c&&b<d.height()&&0<b)&&(w=b,G=c)}),a(document).bind(F+
"."+h.data("mCustomScrollbarIndex"),function(a){a.preventDefault();if(h.data("on_drag")){var b=e.offset();r(w,G,a.originalEvent.pageY-b.top,a.originalEvent.pageX-b.left)}}).bind(I+"."+h.data("mCustomScrollbarIndex"),function(a){h.data({on_drag:!1});e.removeClass("mCSB_dragger_onDrag")})):(e.bind("mousedown touchstart",function(b){b.preventDefault();b.stopImmediatePropagation();var d=a(this),f=d.offset(),c;"touchstart"===b.type?b=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:(h.data({on_drag:!0}),
e.addClass("mCSB_dragger_onDrag"));c=b.pageX-f.left;f=b.pageY-f.top;c<d.width()&&(0<c&&f<d.height()&&0<f)&&(w=f,G=c)}).bind("touchmove",function(b){b.preventDefault();b.stopImmediatePropagation();b=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0];var d=a(this).offset();r(w,G,b.pageY-d.top,b.pageX-d.left)}),a(document).bind("mousemove."+h.data("mCustomScrollbarIndex"),function(a){if(h.data("on_drag")){var b=e.offset();r(w,G,a.pageY-b.top,a.pageX-b.left)}}).bind("mouseup."+h.data("mCustomScrollbarIndex"),
function(a){h.data({on_drag:!1});e.removeClass("mCSB_dragger_onDrag")}));h.data({bindEvent_scrollbar_drag:!0})}if(a.support.touch&&h.data("contentTouchScroll")&&!h.data("bindEvent_content_touch")){var J,S,Q,V,p,k,P;d.bind("touchstart",function(b){b.stopImmediatePropagation();J=b.originalEvent.touches[0]||b.originalEvent.changedTouches[0];S=a(this);Q=S.offset();p=J.pageX-Q.left;k=V=J.pageY-Q.top;P=p});d.bind("touchmove",function(b){b.preventDefault();b.stopImmediatePropagation();J=b.originalEvent.touches[0]||
b.originalEvent.changedTouches[0];S=a(this).parent();Q=S.offset();p=J.pageX-Q.left;V=J.pageY-Q.top;h.data("horizontalScroll")?h.mCustomScrollbar("scrollTo",P-p,{trigger:"internal"}):h.mCustomScrollbar("scrollTo",k-V,{trigger:"internal"})})}h.data("bindEvent_scrollbar_click")||(c.bind("click",function(b){var d=(b.pageY-c.offset().top)*h.data("scrollAmount"),e=a(b.target);h.data("horizontalScroll")&&(d=(b.pageX-c.offset().left)*h.data("scrollAmount"));(e.hasClass("mCSB_draggerContainer")||e.hasClass("mCSB_draggerRail"))&&
h.mCustomScrollbar("scrollTo",d,{trigger:"internal",scrollEasing:"draggerRailEase"})}),h.data({bindEvent_scrollbar_click:!0}));h.data("mouseWheel")&&!h.data("bindEvent_mousewheel")&&(b.bind("mousewheel",function(a,b){var f=h.data("mouseWheelPixels"),g=Math.abs(d.position().top),k=e.position().top,l=c.height()-e.height();h.data("normalizeMouseWheelDelta")&&(b=0>b?-1:1);"auto"===f&&(f=100+Math.round(h.data("scrollAmount")/2));h.data("horizontalScroll")&&(k=e.position().left,l=c.width()-e.width(),g=
Math.abs(d.position().left));if(0<b&&0!==k||0>b&&k!==l)a.preventDefault(),a.stopImmediatePropagation();h.mCustomScrollbar("scrollTo",g-b*f,{trigger:"internal"})}),h.data({bindEvent_mousewheel:!0}));if(h.data("scrollButtons_enable"))if("pixels"===h.data("scrollButtons_scrollType")){h.data("horizontalScroll")?(q.add(z).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",W,da),h.data({bindEvent_buttonsContinuous_x:!1}),h.data("bindEvent_buttonsPixels_x")||
(q.bind("click",function(a){a.preventDefault();L(Math.abs(d.position().left)+h.data("scrollButtons_scrollAmount"))}),z.bind("click",function(a){a.preventDefault();L(Math.abs(d.position().left)-h.data("scrollButtons_scrollAmount"))}),h.data({bindEvent_buttonsPixels_x:!0}))):(f.add(l).unbind("mousedown touchstart MSPointerDown pointerdown mouseup MSPointerUp pointerup mouseout MSPointerOut pointerout touchend",W,da),h.data({bindEvent_buttonsContinuous_y:!1}),h.data("bindEvent_buttonsPixels_y")||(f.bind("click",
function(a){a.preventDefault();L(Math.abs(d.position().top)+h.data("scrollButtons_scrollAmount"))}),l.bind("click",function(a){a.preventDefault();L(Math.abs(d.position().top)-h.data("scrollButtons_scrollAmount"))}),h.data({bindEvent_buttonsPixels_y:!0})));var L=function(a){e.data("preventAction")||(e.data("preventAction",!0),h.mCustomScrollbar("scrollTo",a,{trigger:"internal"}))}}else{if(h.data("horizontalScroll")){if(q.add(z).unbind("click"),h.data({bindEvent_buttonsPixels_x:!1}),!h.data("bindEvent_buttonsContinuous_x")){q.bind("mousedown touchstart MSPointerDown pointerdown",
function(a){a.preventDefault();var b=y();h.data({mCSB_buttonScrollRight:setInterval(function(){h.mCustomScrollbar("scrollTo",Math.abs(d.position().left)+b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var W=function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollRight"))};q.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",W);z.bind("mousedown touchstart MSPointerDown pointerdown",function(a){a.preventDefault();var b=y();h.data({mCSB_buttonScrollLeft:setInterval(function(){h.mCustomScrollbar("scrollTo",
Math.abs(d.position().left)-b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var da=function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollLeft"))};z.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",da);h.data({bindEvent_buttonsContinuous_x:!0})}}else f.add(l).unbind("click"),h.data({bindEvent_buttonsPixels_y:!1}),h.data("bindEvent_buttonsContinuous_y")||(f.bind("mousedown touchstart MSPointerDown pointerdown",function(a){a.preventDefault();
var b=y();h.data({mCSB_buttonScrollDown:setInterval(function(){h.mCustomScrollbar("scrollTo",Math.abs(d.position().top)+b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),f.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollDown"))}),l.bind("mousedown touchstart MSPointerDown pointerdown",function(a){a.preventDefault();var b=y();h.data({mCSB_buttonScrollUp:setInterval(function(){h.mCustomScrollbar("scrollTo",
Math.abs(d.position().top)-b,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})}),l.bind("mouseup touchend MSPointerUp pointerup mouseout MSPointerOut pointerout",function(a){a.preventDefault();clearInterval(h.data("mCSB_buttonScrollUp"))}),h.data({bindEvent_buttonsContinuous_y:!0}));var y=function(){var a=h.data("scrollButtons_scrollSpeed");"auto"===h.data("scrollButtons_scrollSpeed")&&(a=Math.round((h.data("scrollInertia")+100)/40));return a}}h.data("autoScrollOnFocus")&&!h.data("bindEvent_focusin")&&
(b.bind("focusin",function(){b.scrollTop(0).scrollLeft(0);var e=a(document.activeElement);if(e.is("input,textarea,select,button,a[tabindex],area,object")){var f=d.position().top,c=e.position().top,g=b.height()-e.outerHeight();h.data("horizontalScroll")&&(f=d.position().left,c=e.position().left,g=b.width()-e.outerWidth());(0>f+c||f+c>g)&&h.mCustomScrollbar("scrollTo",c,{trigger:"internal"})}}),h.data({bindEvent_focusin:!0}));h.data("autoHideScrollbar")&&!h.data("alwaysShowScrollbar")&&!h.data("bindEvent_autoHideScrollbar")&&
(b.bind("mouseenter",function(a){b.addClass("mCS-mouse-over");g.showScrollbar.call(b.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(a){b.removeClass("mCS-mouse-over");"mouseleave"===a.type&&g.hideScrollbar.call(b.children(".mCSB_scrollTools"))}),h.data({bindEvent_autoHideScrollbar:!0}))},scrollTo:function(b,d){function c(a){if(e.data("mCustomScrollbarIndex"))switch(this.mcs={top:q.position().top,left:q.position().left,draggerTop:w.position().top,draggerLeft:w.position().left,
topPct:Math.round(100*Math.abs(q.position().top)/Math.abs(q.outerHeight()-z.height())),leftPct:Math.round(100*Math.abs(q.position().left)/Math.abs(q.outerWidth()-z.width()))},a){case "onScrollStart":e.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(e,this.mcs);break;case "whileScrolling":e.data("whileScrolling_Callback").call(e,this.mcs);break;case "onScroll":e.data("onScroll_Callback").call(e,this.mcs);break;case "onTotalScrollBack":e.data("onTotalScrollBack_Callback").call(e,this.mcs);
break;case "onTotalScroll":e.data("onTotalScroll_Callback").call(e,this.mcs)}}var e=a(this),l={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:e.data("scrollInertia"),scrollEasing:e.data("scrollEasing")};d=a.extend(l,d);var f,z=e.children(".mCustomScrollBox"),q=z.children(".mCSB_container"),r=z.children(".mCSB_scrollTools"),h=r.children(".mCSB_draggerContainer"),w=h.children(".mCSB_dragger"),l=draggerSpeed=d.scrollInertia,G,n,F,I;if(!q.hasClass("mCS_no_scrollbar")&&(e.data({mCS_trigger:d.trigger}),
e.data("mCS_Init")&&(d.callbacks=!1),b||0===b))"number"===typeof b?d.moveDragger?(f=b,b=e.data("horizontalScroll")?w.position().left*e.data("scrollAmount"):w.position().top*e.data("scrollAmount"),draggerSpeed=0):f=b/e.data("scrollAmount"):"string"===typeof b&&(f="top"===b?0:"bottom"===b&&!e.data("horizontalScroll")?q.outerHeight()-z.height():"left"===b?0:"right"===b&&e.data("horizontalScroll")?q.outerWidth()-z.width():"first"===b?e.find(".mCSB_container").find(":first"):"last"===b?e.find(".mCSB_container").find(":last"):
e.find(b),1===f.length?(b=e.data("horizontalScroll")?f.position().left:f.position().top,f=b/e.data("scrollAmount")):f=b=f),e.data("horizontalScroll")?(e.data("onTotalScrollBack_Offset")&&(n=-e.data("onTotalScrollBack_Offset")),e.data("onTotalScroll_Offset")&&(I=z.width()-q.outerWidth()+e.data("onTotalScroll_Offset")),0>f?(f=b=0,clearInterval(e.data("mCSB_buttonScrollLeft")),n||(G=!0)):f>=h.width()-w.width()?(f=h.width()-w.width(),b=z.width()-q.outerWidth(),clearInterval(e.data("mCSB_buttonScrollRight")),
I||(F=!0)):b=-b,(h=e.data("snapAmount"))&&(b=Math.round(b/h)*h-e.data("snapOffset")),g.mTweenAxis.call(this,w[0],"left",Math.round(f),draggerSpeed,d.scrollEasing),g.mTweenAxis.call(this,q[0],"left",Math.round(b),l,d.scrollEasing,{onStart:function(){d.callbacks&&!e.data("mCS_tweenRunning")&&c("onScrollStart");e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&g.showScrollbar.call(r)},onUpdate:function(){d.callbacks&&c("whileScrolling")},onComplete:function(){d.callbacks&&(c("onScroll"),(G||
n&&q.position().left>=n)&&c("onTotalScrollBack"),(F||I&&q.position().left<=I)&&c("onTotalScroll"));w.data("preventAction",!1);e.data("mCS_tweenRunning",!1);e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&(z.hasClass("mCS-mouse-over")||g.hideScrollbar.call(r))}})):(e.data("onTotalScrollBack_Offset")&&(n=-e.data("onTotalScrollBack_Offset")),e.data("onTotalScroll_Offset")&&(I=z.height()-q.outerHeight()+e.data("onTotalScroll_Offset")),0>f?(f=b=0,clearInterval(e.data("mCSB_buttonScrollUp")),
n||(G=!0)):f>=h.height()-w.height()?(f=h.height()-w.height(),b=z.height()-q.outerHeight(),clearInterval(e.data("mCSB_buttonScrollDown")),I||(F=!0)):b=-b,(h=e.data("snapAmount"))&&(b=Math.round(b/h)*h-e.data("snapOffset")),g.mTweenAxis.call(this,w[0],"top",Math.round(f),draggerSpeed,d.scrollEasing),g.mTweenAxis.call(this,q[0],"top",Math.round(b),l,d.scrollEasing,{onStart:function(){d.callbacks&&!e.data("mCS_tweenRunning")&&c("onScrollStart");e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&
g.showScrollbar.call(r)},onUpdate:function(){d.callbacks&&c("whileScrolling")},onComplete:function(){d.callbacks&&(c("onScroll"),(G||n&&q.position().top>=n)&&c("onTotalScrollBack"),(F||I&&q.position().top<=I)&&c("onTotalScroll"));w.data("preventAction",!1);e.data("mCS_tweenRunning",!1);e.data("autoHideScrollbar")&&!e.data("alwaysShowScrollbar")&&(z.hasClass("mCS-mouse-over")||g.hideScrollbar.call(r))}})),e.data("mCS_Init")&&e.data({mCS_Init:!1})},stop:function(){var b=a(this),d=b.children().children(".mCSB_container"),
b=b.children().children().children().children(".mCSB_dragger");g.mTweenAxisStop.call(this,d[0]);g.mTweenAxisStop.call(this,b[0])},disable:function(b){var d=a(this),c=d.children(".mCustomScrollBox"),e=c.children(".mCSB_container"),g=c.children(".mCSB_scrollTools"),f=g.children().children(".mCSB_dragger");c.unbind("mousewheel focusin mouseenter mouseleave touchend");e.unbind("touchstart touchmove");b&&(d.data("horizontalScroll")?f.add(e).css("left",0):f.add(e).css("top",0));g.css("display","none");
e.addClass("mCS_no_scrollbar");d.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var b=a(this);b.removeClass("mCustomScrollbar _mCS_"+b.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove();a(document).unbind("mousemove."+b.data("mCustomScrollbarIndex")+" mouseup."+b.data("mCustomScrollbarIndex")+
" MSPointerMove."+b.data("mCustomScrollbarIndex")+" MSPointerUp."+b.data("mCustomScrollbarIndex"));a(window).unbind("resize."+b.data("mCustomScrollbarIndex"))}},g={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(a,d,c,e,g,f){function l(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?
Date.now():(new Date).getTime()}function q(){J||w.call();J=l()-F;r();J>=a._time&&(a._time=J>a._time?J+I-(J-a._time):J+I-1,a._time<J+1&&(a._time=J+1));a._time<e?a._id=_request(q):n.call()}function r(){0<e?(a.currVal=h(a._time,S,V,e,g),Q[d]=Math.round(a.currVal)+"px"):Q[d]=c+"px";G.call()}function h(a,b,d,e,c){switch(c){case "linear":return d*a/e+b;case "easeOutQuad":return a/=e,-d*a*(a-2)+b;case "easeInOutQuad":a/=e/2;if(1>a)return d/2*a*a+b;a--;return-d/2*(a*(a-2)-1)+b;case "easeOutCubic":return a/=
e,a--,d*(a*a*a+1)+b;case "easeOutQuart":return a/=e,a--,-d*(a*a*a*a-1)+b;case "easeOutQuint":return a/=e,a--,d*(a*a*a*a*a+1)+b;case "easeOutCirc":return a/=e,a--,d*Math.sqrt(1-a*a)+b;case "easeOutSine":return d*Math.sin(a/e*(Math.PI/2))+b;case "easeOutExpo":return d*(-Math.pow(2,-10*a/e)+1)+b;case "mcsEaseOut":return e=(a/=e)*a,c=e*a,b+d*(0.499999999999997*c*e+-2.5*e*e+5.5*c+-6.5*e+4*a);case "draggerRailEase":a/=e/2;if(1>a)return d/2*a*a*a+b;a-=2;return d/2*(a*a*a+2)+b}}f=f||{};var w=f.onStart||function(){},
G=f.onUpdate||function(){},n=f.onComplete||function(){},F=l(),I,J=0,S=a.offsetTop,Q=a.style;"left"===d&&(S=a.offsetLeft);var V=c-S;null!=a._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(a._id):clearTimeout(a._id),a._id=null);(function(){I=1E3/60;a._time=J+I;_request=!window.requestAnimationFrame?function(a){r();return setTimeout(a,0.01)}:window.requestAnimationFrame;a._id=_request(q)})()},mTweenAxisStop:function(a){null!=a._id&&(window.requestAnimationFrame?window.cancelAnimationFrame(a._id):
clearTimeout(a._id),a._id=null)},rafPolyfill:function(){for(var a=["ms","moz","webkit","o"],d=a.length;-1<--d&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[a[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[d]+"CancelAnimationFrame"]||window[a[d]+"CancelRequestAnimationFrame"]}};g.rafPolyfill.call();a.support.touch=!!("ontouchstart"in window);a.support.pointer=window.navigator.pointerEnabled;a.support.msPointer=window.navigator.msPointerEnabled;var l="https:"==
document.location.protocol?"https:":"http:";a.event.special.mousewheel||document.write('<script src="'+l+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js">\x3c/script>');a.fn.mCustomScrollbar=function(b){if(c[b])return c[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return c.init.apply(this,arguments);a.error("Method "+b+" does not exist")}})(jQuery);(function(){var a,c,g,l=function(a,d){return function(){return a.apply(d,arguments)}};a=jQuery;c=function(){function a(){}a.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"};a.transition=function(a){var b,e,c;a=a[0];c=this.transitions;for(e in c)if(b=c[e],null!=a.style[e])return b};return a}();g=function(){function b(d){null==d&&(d={});this.html=l(this.html,this);this.$growl=l(this.$growl,this);this.$growls=
l(this.$growls,this);this.animate=l(this.animate,this);this.remove=l(this.remove,this);this.dismiss=l(this.dismiss,this);this.present=l(this.present,this);this.close=l(this.close,this);this.cycle=l(this.cycle,this);this.unbind=l(this.unbind,this);this.bind=l(this.bind,this);this.render=l(this.render,this);this.settings=a.extend({},b.settings,d);this.$growls().attr("class",this.settings.location);this.render()}b.settings={namespace:"growl",duration:5E3,close:"&times;",location:"default",style:"default",
size:"medium"};b.growl=function(a){null==a&&(a={});this.initialize();return new b(a)};b.initialize=function(){return a("body:not(:has(#growls))").append('<div id="growls" />')};b.prototype.render=function(){var a;a=this.$growl();this.$growls().append(a);this.cycle(a)};b.prototype.bind=function(a){null==a&&(a=this.$growl());return a.find("."+this.settings.namespace+"-close").on("click",this.close)};b.prototype.unbind=function(a){null==a&&(a=this.$growl());return a.find("."+(this.settings.namespace-
close)).off("click",this.close)};b.prototype.cycle=function(a){null==a&&(a=this.$growl());return a.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)};b.prototype.close=function(a){a.preventDefault();a.stopPropagation();return this.$growl().stop().queue(this.dismiss).queue(this.remove)};b.prototype.present=function(a){var b;b=this.$growl();this.bind(b);return this.animate(b,""+this.settings.namespace+"-incoming","out",a)};b.prototype.dismiss=function(a){var b;
b=this.$growl();this.unbind(b);return this.animate(b,""+this.settings.namespace+"-outgoing","in",a)};b.prototype.remove=function(a){this.$growl().remove();return a()};b.prototype.animate=function(a,b,e,g){var f;null==e&&(e="in");f=c.transition(a);a["in"===e?"removeClass":"addClass"](b);a.offset().position;a["in"===e?"addClass":"removeClass"](b);if(null!=g)if(null!=f)a.one(f,g);else g()};b.prototype.$growls=function(){return null!=this.$_growls?this.$_growls:this.$_growls=a("#growls")};b.prototype.$growl=
function(){return null!=this.$_growl?this.$_growl:this.$_growl=a(this.html())};b.prototype.html=function(){return"<div class='ss-chat-open-user-conversation "+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"' data-ss-uid='"+this.settings.from_id+"' style='cursor: pointer;'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+
"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>"};return b}();a.growl=function(a){null==a&&(a={});return g.growl(a)};a.growl.error=function(b){null==b&&(b={});return a.growl(a.extend({title:"Error!",style:"error"},b))};a.growl.notice=function(b){null==b&&(b={});return a.growl(a.extend({title:"Notice!",style:"notice"},b))};a.growl.warning=function(b){null==b&&(b={});return a.growl(a.extend({title:"Warning!",style:"warning"},b))}}).call(this);(function(a){function c(d,c){if(0===d.indexOf("#"))a(d).clone(!0).appendTo(b.empty()).show();else{if(c){var f=a("<iframe />").attr({src:d,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});b.html(f)}else b.load(d);b.data("localEl",!1)}}function g(a,c){var f=b.outerWidth(!0),g={},m={};if(!b.is(":visible")&&!d){d=!0;switch(a){case "left":b.css({left:"auto",right:"-"+f+"px"});g.left="-="+f;m.right="+="+f;break;default:b.css({left:"-"+f+"px",right:"auto"}),g.left="+="+f,m.left="+="+f}l.animate(g,
c);b.show().animate(m,c,function(){d=!1})}}var l=a(".content"),b=a(".ss-chat"),d=!1,m;0==b.length&&(b=a("<div />").attr("class","ss-chat").css("display","none").appendTo(a("body")));a.fn.pageslide=function(d){this.click(function(c){var f=a(this),g=a.extend({href:f.attr("href")},d);c.preventDefault();c.stopPropagation();b.is(":visible")&&f[0]==m?a.pageslide.close():(a.pageslide(g),m=f[0])})};a.fn.pageslide.defaults={speed:200,direction:"right",modal:!1,iframe:!0,href:null};a.pageslide=function(d){var l=
a.extend({},a.fn.pageslide.defaults,d);b.is(":visible")&&b.data("direction")!=l.direction?a.pageslide.close(function(){c(l.href,l.iframe);g(l.direction,l.speed)}):(c(l.href,l.iframe),b.is(":hidden")&&g(l.direction,l.speed));b.data(l)};a.pageslide.close=function(b){var c=a(".ss-chat"),f=c.outerWidth(!0),g=c.data("speed"),m={},r={};if(!c.is(":hidden")&&!d){d=!0;switch(c.data("direction")){case "left":m.left="+="+f;r.right="-="+f;break;default:m.left="-="+f,r.left="-="+f}c.animate(r,g);l.animate(m,g,
function(){c.hide();d=!1;"undefined"!=typeof b&&b()})}};b.click(function(a){a.stopPropagation()});a(document).bind("click keyup",function(d){"keyup"==d.type&&27!=d.keyCode||b.is(":visible")&&!b.data("modal")&&a.pageslide.close()})})(jQuery);(function(a){function c(d,c){this.element=d;this.options=a.extend({},l,c);a(this.element).data("max-height",this.options.maxHeight);a(this.element).data("height-margin",this.options.heightMargin);delete this.options.maxHeight;if(this.options.embedCSS&&!b){var e=".readmore-js-toggle, .readmore-js-section { "+this.options.sectionCSS+" } .readmore-js-section { overflow: hidden; }",x=document.createElement("style");x.type="text/css";x.styleSheet?x.styleSheet.cssText=e:x.appendChild(document.createTextNode(e));
document.getElementsByTagName("head")[0].appendChild(x);b=!0}this._defaults=l;this._name=g;this.init()}var g="readmore",l={speed:100,maxHeight:50,heightMargin:16,moreLink:'<a href="#" style="color: #117bc0; font-weight: 700; text-decoration: none;">Read More</a>',lessLink:'<a href="#" style="color: #117bc0; font-weight: 700; text-decoration: none;">Close</a>',embedCSS:!0,sectionCSS:"display: block; width: 100%;",startOpen:!1,expandedClass:"readmore-js-expanded",collapsedClass:"readmore-js-collapsed",
beforeToggle:function(){},afterToggle:function(){}},b=!1;c.prototype={init:function(){var b=this;a(this.element).each(function(){var c=a(this),e=c.css("max-height").replace(/[^-\d\.]/g,"")>c.data("max-height")?c.css("max-height").replace(/[^-\d\.]/g,""):c.data("max-height"),g=c.data("height-margin");"none"!=c.css("max-height")&&c.css("max-height","none");b.setBoxHeight(c);if(c.outerHeight(!0)<=e+g)return!0;c.addClass("readmore-js-section "+b.options.collapsedClass).data("collapsedHeight",e);c.after(a(b.options.startOpen?
b.options.lessLink:b.options.moreLink).on("click",function(a){b.toggleSlider(this,c,a)}).addClass("readmore-js-toggle"));b.options.startOpen||c.css({height:e})});a(window).on("resize",function(a){b.resizeBoxes()})},toggleSlider:function(b,c,e){e.preventDefault();var g=this;e=newLink=sectionClass="";var f=!1;e=a(c).data("collapsedHeight");a(c).height()<=e?(e=a(c).data("expandedHeight")+"px",newLink="lessLink",f=!0,sectionClass=g.options.expandedClass):(newLink="moreLink",sectionClass=g.options.collapsedClass);
g.options.beforeToggle(b,c,f);a(c).animate({height:e},{duration:g.options.speed,complete:function(){g.options.afterToggle(b,c,f);a(b).replaceWith(a(g.options[newLink]).on("click",function(a){g.toggleSlider(this,c,a)}).addClass("readmore-js-toggle"));a(this).removeClass(g.options.collapsedClass+" "+g.options.expandedClass).addClass(sectionClass)}})},setBoxHeight:function(a){var b=a.clone().css({height:"auto",width:a.width(),overflow:"hidden"}).insertAfter(a),c=b.outerHeight(!0);b.remove();a.data("expandedHeight",
c)},resizeBoxes:function(){var b=this;a(".readmore-js-section").each(function(){var c=a(this);b.setBoxHeight(c);(c.height()>c.data("expandedHeight")||c.hasClass(b.options.expandedClass)&&c.height()<c.data("expandedHeight"))&&c.css("height",c.data("expandedHeight"))})},destroy:function(){var b=this;a(this.element).each(function(){var c=a(this);c.removeClass("readmore-js-section "+b.options.collapsedClass+" "+b.options.expandedClass).css({"max-height":"",height:"auto"}).next(".readmore-js-toggle").remove();
c.removeData()})}};a.fn[g]=function(b){var l=arguments;if(void 0===b||"object"===typeof b)return this.each(function(){if(a.data(this,"plugin_"+g)){var e=a.data(this,"plugin_"+g);e.destroy.apply(e)}a.data(this,"plugin_"+g,new c(this,b))});if("string"===typeof b&&"_"!==b[0]&&"init"!==b)return this.each(function(){var e=a.data(this,"plugin_"+g);e instanceof c&&"function"===typeof e[b]&&e[b].apply(e,Array.prototype.slice.call(l,1))})}})(jQuery);$(document).on("click",".ss-link",function(){window.location.href=this.getAttribute("data-ss-link")});$.fn.text_multiline=function(a){this.text(a);this.html(this.html().replace(/\n/g,"<br/>"));return this};var audio_alert=function(){$("#ss-audio-alert")[0].play()};var socket="local"===environment?io.connect("http://studysquare.lh:53100"):io.connect("http://studysquare.com:53100");socket.on("duplicate_session",function(){$.ssModal({modalId:"duplicate-session",canBeClosed:0})});$(document).on("click",".ss-modal-bg",function(){$.ssModal({action:"try_close"})});$(document).on("keyup",function(a){27==a.keyCode&&$.ssModal({action:"try_close"})});$(document).on("click",".ss-modal-close",function(){$.ssModal({action:"close"})});
(function(a){a.ssModal=function(c){var g=a.extend({modalId:"0",canBeClosed:1,action:"open",complete:function(){}},c);"open"===g.action?a.ssModal({action:"close",complete:function(){a("#ss-modal-"+g.modalId).fadeIn({duration:1E3});a(".ss-modal-bg").data("can_be_closed",g.canBeClosed).fadeIn({duration:1E3,complete:g.complete})}}):"close"===g.action?(a(".ss-modal").fadeOut({duration:1E3}),a(".ss-modal-bg").fadeOut({duration:1E3,complete:g.complete})):"try_close"===g.action&&(c=a(".ss-modal-bg"),c.data("can_be_closed")&&
1==c.data("can_be_closed")&&a.ssModal({action:"close"}))}})(jQuery);function dateToString(a){var c=a.getDate(),g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],l=a.getFullYear(),b=a.getHours();a=a.getMinutes();var d="AM";12<=b&&(b-=12,d="PM");0==b&&(b=12);return""+g+" "+(9>=c?"0"+c:c)+", "+l+" at "+(9>=b?"0"+b:b)+":"+(9>=a?"0"+a:a)+" "+d}
function convert_time(){$(".time-ago").each(function(){if(""==this.getAttribute("data-time"))return!0;var a=new Date(1E3*this.getAttribute("data-time")),c=Math.round((new Date-a)/1E3);0>c?(c=0-c,60>c?$(this).html("in a few seconds"):(c=Math.floor(c/60),10>c?$(this).html("in about "+c+" minutes"):$(this).html(dateToString(a)))):60>c?$(this).html("a few seconds ago"):(c=Math.floor(c/60),60>c?$(this).html("about "+c+" minute"+(1<c?"s":"")+" ago"):(c=Math.floor(c/60),24>c?$(this).html("about "+c+" hours ago"):
$(this).html(dateToString(a))))})}convert_time();var convert_time_internval=setInterval(convert_time,6E4);function convert_seconds(a){var c=parseInt(a/60,10);a%=60;return(10>c?"0"+c:c)+":"+(10>a?"0"+a:a)};$(document).on("click",".page-tab",function(){var a=".page-tab-"+this.getAttribute("data-ss-tab");$(".page-tab").removeClass("is-active");$(this).addClass("is-active");$(".page-tab-component").hide();$(a).show()});$(document).on("click",".ss-photo",function(){console.log("--Expand photo")});
$(document).on("change",".ss-picture-upload",function(){var a=this;if(a.files&&a.files[0]){var c=a.files[0];if(!c.type.match(/image.*/))return!1;var g=new FileReader;g.onload=function(c){var b=$(a).parents(".ss-file-wrapper").siblings(".ss-picture-preview");c=$("<img/>").attr("src",c.target.result);b.html(c).show();c.Jcrop({aspectRatio:1,minSize:[50,50],setSelect:[100,100,50,50],onSelect:function(a){$('input[name="profile_x"]').val(a.x);$('input[name="profile_y"]').val(a.y);$('input[name="profile_w"]').val(a.w);
$('input[name="profile_h"]').val(a.h)}})};g.readAsDataURL(c)}});$(document).on("click",".thumb-up",function(){var a=$(this).children(".thumb-up-count"),c=$(this).siblings(".thumb-down").children(".thumb-down-count"),g=this.getAttribute("data-pid");$.ajax({url:"/ajax/post/save_thumb",method:"POST",data:{type:"up",id:g}}).done(function(g){0==g.result?(c.text(parseInt(c.text())-1),a.text(parseInt(a.text())+1)):1==g.result&&a.text(parseInt(a.text())+1)})});
$(document).on("click",".thumb-down",function(){var a=$(this).children(".thumb-down-count"),c=$(this).siblings(".thumb-up").children(".thumb-up-count"),g=this.getAttribute("data-pid");$.ajax({url:"/ajax/post/save_thumb",method:"POST",data:{type:"down",id:g}}).done(function(g){0==g.result?(a.text(parseInt(a.text())+1),c.text(parseInt(c.text())-1)):1==g.result&&a.text(parseInt(a.text())+1)})});
function post_comment(a,c){show_comment(a,c);$.ajax({url:"/ajax/post/post_comment",method:"POST",data:{pid:a,comment:c}}).done(function(a){})}function show_comment(a,c){var g=$(".snippet-comment").clone().removeClass("snippet-comment");g.addClass("posted-comment");$(".posted-comment-message",g).text_multiline(c);$(".posted-comment-time",g)[0].setAttribute("data-time",Math.round(new Date/1E3));$('.posted-comments[data-ss-pid="'+a+'"]').prepend(g);g.removeClass("hide");convert_time()}
$(document).on("click",".post-comment-button",function(){var a=$.trim($(this).parents(".post-comment").children(".post-comment-textarea").val()),c=$(this).data("ss-pid");""!==a&&(post_comment(c,a),$(this).parents(".post-comment").children(".post-comment-textarea").val(""))});
$(document).on("keyup",".post-comment-textarea",function(a){var c=$.trim($(this).val()),g=$(this).data("ss-pid");13===a.keyCode&&($(this).siblings(".post-comment-bottom").children(".post-comment-pressing-enter").children(".post-comment-pressing-enter-cb").is(":checked")&&""!==c)&&(post_comment(g,c),$(this).val(""))});$(".article-content-text").readmore();
$(document).on("click",".posted-comments .show-more",function(){$(this).parents(".posted-comments").children(".posted-comment").css({display:"block"});$(this).remove()});$(document).on("change",'[name="user_photos[]"]',function(){var a=new FormData;for(i=0;i<this.files.length;i++)a.append("user_photos[]",this.files[i]);$.ajax({url:"/ajax/user/upload_photos",type:"POST",data:a,processData:!1,contentType:!1,dataType:"json"}).done(function(a){console.log(a)})});
$(document).on("mouseenter",".ss-photo",function(){$(this).children(".ss-photo-hover").fadeIn();$(this).children(".ss-photo-delete").fadeIn()}).on("mouseleave",".ss-photo",function(){$(this).children(".ss-photo-hover").fadeOut();$(this).children(".ss-photo-delete").fadeOut()});$(document).on("click",".ss-photo-delete",function(a){a.stopPropagation();a=this.getAttribute("data-ss-photo-id");$.ajax({url:"/ajax/user/delete_photo",type:"POST",data:{id:a}}).done(function(a){console.log(a)})});0!=$("#right-calendar").length&&($("#right-calendar").datepicker({beforeShowDay:function(a){for(var c=0;c<window.futureSessionDates.length;c++)if((new Date(window.futureSessionDates[c])).toDateString()==a.toDateString())return[!0,"highlight"];return[!0,""]}}),$(".ss-search-anything").autocomplete({minLength:1,source:function(a,c){$.ajax({url:"/ajax/search",data:{search:a.term},dataType:"json",type:"GET",success:function(a){c(a)}})},select:function(a,c){a.preventDefault();window.location.href="/"+
c.item.type.toLowerCase()+"/"+c.item.id}}).data("ui-autocomplete")._renderItem=function(a,c){var g='<a class="ss-search-result">';""!=c.profile_picture&&(g+='<div class="profile-picture ss-search-result-img"><img src="'+c.profile_picture+'" width="50" /></div>');g=g+'<div class="ss-search-result-content">'+(c.name+"<br />");if("Group"==c.type||"Classroom"==c.type)g+='<span class="ss-search-result-data"><span class="bold">'+c.data+"</span> members</span>";if(("Highschool"==c.type||"University"==c.type||
"User"==c.type)&&c.data)g+='<span class="ss-search-result-data">'+c.data+"</span>";g+="</div>";g+='<div class="clear"></div>';g+="</a>";return $("<li>").append(g).appendTo(a)},$(".ss-search-anything").autocomplete("widget").addClass("ss-search-ul"));$(".classroom-autocomplete").autocomplete({minLength:1,source:function(a,c){$.ajax({url:"/ajax/classroom/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){c(a)}})},select:function(a,c){a.preventDefault();window.location.href="/classroom/"+c.item.id}});for(i=0;i<$(".classroom-autocomplete").length;i++)$($(".classroom-autocomplete")[i]).data("ui-autocomplete")._renderItem=function(a,c){return $("<li>").append("<a>"+c.name+"</a>").appendTo(a)};
$(".group-autocomplete").autocomplete({minLength:1,source:function(a,c){$.ajax({url:"/ajax/group/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){c(a)}})},select:function(a,c){a.preventDefault();window.location.href="/group/"+c.item.id}});for(i=0;i<$(".group-autocomplete").length;i++)$($(".group-autocomplete")[i]).data("ui-autocomplete")._renderItem=function(a,c){return $("<li>").append("<a>"+c.name+"</a>").appendTo(a)};
$(".create-classroom").click(function(){window.location.href="/classroom/create?name="+encodeURIComponent($(".classroom-autocomplete").val())});$(".create-group").click(function(){window.location.href="/group/create?name="+encodeURIComponent($(".group-autocomplete").val())});$(".page-settings").on("click",".ss-delete",function(){var a=this.getAttribute("data-ss-id");$.ajax({url:"/ajax/settings/delete_education",type:"POST",data:{id:a}}).done(function(a){});$(this).parents("tr").remove()});$(".page-settings").on("click",".ss-add-education",function(){var a=$(".hide.snippet-add-education").clone().removeClass("hide"),a=$("<tr></tr>").append($("<td></td>").append(a));$(".ss-table-education").prepend(a);update_autocomplete_my_profile()});
$(".page-settings").on("change",'select[name="type[]"]',function(){var a=$(this).siblings('input[name="name[]"]');a.val("");a.removeClass("university-autocomplete");a.removeClass("highschool-autocomplete");"highschool"==this.value?a.addClass("highschool-autocomplete"):a.addClass("university-autocomplete");$(this).siblings('input[name="education_id[]"]').val("0");update_autocomplete_my_profile()});
function update_autocomplete_my_profile(){$(".highschool-autocomplete").autocomplete({minLength:1,source:function(a,c){$.ajax({url:"/ajax/highschool/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){c(a)}})},select:function(a,c){a.preventDefault();$(this).val(c.item.name);$(this).siblings('input[name="education_id[]"]').val(c.item.id)}});for(i=0;i<$(".highschool-autocomplete").length;i++)$($(".highschool-autocomplete")[i]).data("ui-autocomplete")._renderItem=function(a,c){return $("<li>").append("<a>"+
c.name+'<br /><span style="font-size: 12px;">'+c.address+"</span></a>").appendTo(a)};$(".university-autocomplete").autocomplete({minLength:1,source:function(a,c){$.ajax({url:"/ajax/university/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){c(a)}})},select:function(a,c){a.preventDefault();$(this).val(c.item.name);$(this).siblings('input[name="education_id[]"]').val(c.item.id)}});for(i=0;i<$(".university-autocomplete").length;i++)$($(".university-autocomplete")[i]).data("ui-autocomplete")._renderItem=
function(a,c){return $("<li>").append("<a>"+c.name+'<br /><span style="font-size: 12px;">'+c.address+"</span></a>").appendTo(a)};$(".major-autocomplete").autocomplete({minLength:1,source:function(a,c){$.ajax({url:"/ajax/major/json",data:{search:a.term},dataType:"json",type:"GET",success:function(a){c(a)}})},select:function(a,c){a.preventDefault();$(this).val(c.item.title);$(this).siblings('input[name="major_id[]"]').val(c.item.id)}});for(i=0;i<$(".major-autocomplete").length;i++)$($(".major-autocomplete")[i]).data("ui-autocomplete")._renderItem=
function(a,c){return $("<li>").append("<a>"+c.title+"</a>").appendTo(a)}};$(".page-settings").on("click",".cg-leave-button",function(){var a=this.getAttribute("data-cg-id"),c="/ajax/"+this.getAttribute("data-cg-type")+"/quit";$.ajax({url:c,type:"POST",data:{id:a}}).done(function(a){window.location.reload()})});$(".page-settings").on("click",".cg-join-button",function(){var a=this.getAttribute("data-cg-id"),c="/ajax/"+this.getAttribute("data-cg-type")+"/join";$.ajax({url:c,type:"POST",data:{id:a}}).done(function(a){window.location.reload()})});0!=$(".ss-complete-subjects").length&&$(".ss-complete-subjects").tokenInput("/ajax/settings/subjects",{hintText:"Start typing a subject ...",preventDuplicates:!0,prePopulate:current_user_subjects,onAdd:function(a){$.ajax({url:"/ajax/settings/add_subject",type:"POST",data:{id:a.id}}).done(function(a){})},onDelete:function(a){$.ajax({url:"/ajax/settings/delete_subject",type:"POST",data:{id:a.id}}).done(function(a){})}});
$(document).on("click",".ss-request-subject",function(){$.ajax({url:"/ajax/settings/request_subject",type:"POST",data:{name:$(".ss-request-subject-name").val()}}).done(function(a){0==a.error?alert("Request Sent! Please allow a few hours for us to review it!"):alert("There was an error! Please complete the fields!")});$(".ss-request-subject-name").val("")});
$(document).on("change",'[name="tc-available-now"]',function(){var a=0;$(this).is(":checked")&&(a=1);$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:"available",value:a}}).done(function(a){})});$(document).on("change",'[name="tc-bio"]',function(){$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:"bio",value:this.value}}).done(function(a){})});
$(document).on("change",'[name="tc-hourly-rate"]',function(){$('[name="tc-net-rate"]').val(parseInt(this.value)-parseInt(this.value)/10-1);$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:"price",value:this.value}}).done(function(a){})});
$(document).on("click",".ss-inc-req-approve",function(){var a=this.getAttribute("data-hr-id"),c=$(this).parents("tr").find('input[name="ss-inc-req-date'+a+'"]:checked').val();"1"!=c&&("2"!=c&&"3"!=c)&&(c="1");$.ajax({url:"/ajax/settings/approve_hire_request",type:"POST",data:{hr_id:a,choice:c}}).done(function(a){});$(this).parents("tr").remove()});
$(document).on("click",".ss-inc-req-decline",function(){var a=this.getAttribute("data-hr-id");$.ajax({url:"/ajax/settings/decline_hire_request",type:"POST",data:{hr_id:a}}).done(function(a){});$(this).parents("tr").remove()});$(document).on("change",".page-settings .ss-ns-change",function(){var a=this.getAttribute("data-ss-ns-change"),c=$(this).val();$.ajax({url:"/ajax/settings/change_user_data",type:"POST",data:{what:a,value:c}}).done(function(a){})});$(document).on("click",".ss-money-withdrawal-button",function(){var a=parseInt($(".ss-money-withdrawal-input").val(),10),c=parseInt($(".ss-money-withdrawal-your-funds").text(),10);a>c||0==a?$.ssModal({modalId:"withdrawal-error"}):($(".ss-modal-withdrawal-amount").text("$"+a),$.ssModal({modalId:"withdrawal"}))});$(document).on("click",".ss-financial-add-dwolla",function(){$.ssModal({modalId:"add-dwolla"})});
$(document).on("click",".ss-modal-add-dwolla-save",function(){var a=$('input[name="ss-add-dwolla-email"]').val();$.ssModal({action:"close"});$.ajax({url:"/ajax/settings/add_dwolla",type:"POST",data:{email:a}}).done(function(a){window.location.reload()})});$(document).on("click",".ss-financial-delete-dwolla",function(){var a=this.getAttribute("data-ss-dwolla-id");$(this).parents("li").remove();$.ajax({url:"/ajax/settings/delete_dwolla",type:"POST",data:{id:a}}).done(function(a){window.location.reload()})});
$(document).on("click",".ss-modal-withdrawal-method",function(){var a=this.getAttribute("data-ss-method-id");$.ssModal({action:"close"});$.ajax({url:"/ajax/settings/withdrawal",type:"POST",data:{amount:parseInt($(".ss-money-withdrawal-input").val(),10),method_id:a}}).done(function(a){1==a.error?$.ssModal({modalId:"withdrawal-error2"}):($.ssModal({modalId:"withdrawal-success"}),setTimeout(function(){window.location.reload()},1500))})});$(document).on("click",".join-cg",function(){var a=this.getAttribute("data-what"),a="/ajax/"+a+"/join",c=this.getAttribute("data-id");$(this).hide();$.ajax({url:a,type:"POST",data:{id:c}}).done(function(a){$("h2.count-members").text(parseInt($("h2.count-members").text())+1)})});0!=$(".message-page").length&&($(window).resize(function(){var a=$(window).height()-200;$(".layout-sidebar-right .ss-container").height()>=a&&(a=$(".layout-sidebar-right .ss-container").height());$(".message-container-left").height(a);$(".message-container-main").height(a-100)}),$(window).load(function(){$(window).resize();$(".message-container-main, .message-container-left").mCustomScrollbar();$(".layout-main .message-container-main").mCustomScrollbar("scrollTo","bottom")}));
$(".layout-sidebar.message-page").on("click",".conversation-item",function(){var a=this.getAttribute("data-uid");$(".conversation-item").removeClass("is-selected");$(this).addClass("is-selected");$(".message-container-main .mCSB_container").html("");$(".message-send")[0].setAttribute("data-uid",a);$.ajax({url:"/ajax/messages/get_conversation",type:"GET",data:{uid:a}}).done(function(a){$.each(a,function(a,c){var b=$(".snippet-message").clone().removeClass("snippet-message");b.addClass(c.type+"-message");
$(".message-content p",b).text_multiline(c.message);$(".message-time",b)[0].setAttribute("data-time",c.created_at);$(".message-picture img",b)[0].setAttribute("src",c.message_picture);$(".message-container-main .mCSB_container").append(b);b.removeClass("hide")});convert_time();$(".layout-main .message-container-main").mCustomScrollbar("update");$(".layout-main .message-container-main").mCustomScrollbar("scrollTo","bottom")})});
$(".layout-main.message-page").on("click",".message-send",function(){var a=$(".message-new textarea"),c=$(this)[0].getAttribute("data-uid");a.val($.trim(a.val()));if(""!=a.val()){var g=$(".snippet-message").clone().removeClass("snippet-message");g.addClass("sent-message");$(".message-content p",g).text_multiline(a.val());$(".message-time",g)[0].setAttribute("data-time",Math.round(new Date/1E3));$(".message-container-main .mCSB_container").append(g);g.removeClass("hide");convert_time();$(".layout-main .message-container-main").mCustomScrollbar("update");
$(".layout-main .message-container-main").mCustomScrollbar("scrollTo","bottom");$.ajax({url:"/ajax/messages/send_message",type:"POST",data:{message:a.val(),uid:c}}).done(function(a){});a.val("")}});$(document).on("mouseenter",".friend",function(){$("span",this).fadeIn();$(".friend-hover",this).fadeIn()}).on("mouseleave",".friend",function(){$("span",this).fadeOut();$(".friend-hover",this).fadeOut()});$(document).on("click",".add-friend-button",function(){var a=this.getAttribute("data-uid");$(this).hide();$.ajax({url:"/ajax/friendship/send_request",type:"POST",data:{id:a}}).done(function(a){})});$(document).on("click",".hire-user-button",function(){$.ssModal({modalId:"hire"})});$("#ss-hire-date1").datepicker();
$("#ss-hire-date2").datepicker();$("#ss-hire-date3").datepicker();
$(document).on("click","#ss-hire-send",function(){$.ssModal({action:"close"});var a=$("#ss-hire-date1").datepicker("getDate");a.setHours(parseInt(12*$('select[name="ap1"]').val())+parseInt($('select[name="hour1"]').val()));a.setMinutes($('select[name="minute1"]').val());var c=$("#ss-hire-date2").datepicker("getDate");c.setHours(parseInt(12*$('select[name="ap2"]').val())+parseInt($('select[name="hour2"]').val()));c.setMinutes($('select[name="minute2"]').val());var g=$("#ss-hire-date3").datepicker("getDate");
g.setHours(parseInt(12*$('select[name="ap3"]').val())+parseInt($('select[name="hour3"]').val()));g.setMinutes($('select[name="minute3"]').val());$.ajax({url:"/ajax/user/hire",type:"POST",data:{hours:$("#ss-hire-hours").val(),tutor_id:user_view_id,description:$("#ss-hire-desc textarea").val(),time1_y:a.getUTCFullYear(),time1_m:a.getUTCMonth()+1,time1_d:a.getUTCDate(),time1_h:a.getUTCHours(),time1_min:a.getUTCMinutes(),time2_y:c.getUTCFullYear(),time2_m:c.getUTCMonth()+1,time2_d:c.getUTCDate(),time2_h:c.getUTCHours(),
time2_min:c.getUTCMinutes(),time3_y:g.getUTCFullYear(),time3_m:g.getUTCMonth()+1,time3_d:g.getUTCDate(),time3_h:g.getUTCHours(),time3_min:g.getUTCMinutes()}}).done(function(a){1===a.error&&("hours"===a.error_type?$.ssModal({modalId:"hire-hours-limit"}):"description"===a.error_type?$.ssModal({modalId:"hire-description"}):"time_check"===a.error_type?$.ssModal({modalId:"hire-3-hours"}):"time_equal"===a.error_type?$.ssModal({modalId:"hire-time-equal"}):"money"===a.error_type?$.ssModal({modalId:"hire-money"}):
$.ssModal({modalId:"hire-other"}))})});function header_close_extended(){$(".header-extended").each(function(){"none"!=$(this).css("display")&&$(this).animate({height:"toggle"})});"none"!=$(".header-settings-extended").css("display")&&$(".header-settings-extended").animate({height:"toggle"});$(".ss-chat").is(":visible")&&$.pageslide.close()}$(document).on("click",function(){header_close_extended()});
$(document).on("click",".header-settings-icon",function(a){"none"==$(".header-settings-extended").css("display")&&header_close_extended();$(".header-settings-extended").animate({height:"toggle"});a.stopPropagation()});$(document).on("click",".header-friend-icon",function(a){"none"==$(".header-friend-extended").css("display")&&header_close_extended();$(".header-friend-extended").animate({height:"toggle"});a.stopPropagation()});
$(document).on("click",".header-notif-icon",function(a){"none"==$(".header-notif-extended").css("display")&&header_close_extended();$(".header-notif-extended").animate({height:"toggle"});a.stopPropagation()});$(document).on("click",".accept-friendship-request",function(){var a=this.getAttribute("data-uid");$(this).parents(".header-extended-item").hide();$.ajax({url:"/ajax/friendship/accept_request",method:"POST",data:{id:a}}).done(function(a){})});
$(document).on("click",".decline-friendship-request",function(){var a=this.getAttribute("data-uid");$(this).parents(".header-extended-item").hide();$.ajax({url:"/ajax/friendship/decline_request",method:"POST",data:{id:a}}).done(function(a){})});var ss_get_search_results=function(){var a=$("#ss-search-slider").slider("value"),c=$(".ss-search-name .ss-search").val(),g=[];$('.ss-search-subject input[type="checkbox"]:checked').each(function(){g.push(this.getAttribute("data-ss-sid"))});var g=g.join(","),l=$(".ss-search-available-now"),l=l.is(":checked")?1:0;$.ajax({type:"POST",url:"/ajax/tutor/search",data:{price:a,name:c,subjects:g,available:l}}).done(function(a){""===a?($(".ss-tutor-search-result").hide(),$(".ss-search-no-results").show()):
($(".ss-tutor-search-result").html(a),$(".ss-tutor-search-result").show(),$(".ss-search-no-results").hide(),$(".ss-search-result-bio-text").readmore())})};$(".ss-search-name .ss-search").on("change",function(){ss_get_search_results()});$("#ss-search-slider").slider({value:100,min:20,max:100,slide:function(a,c){$("#ss-search-amount").html("$"+c.value)},stop:function(a,c){$("#ss-search-amount").html("$"+c.value);ss_get_search_results()}});$("#ss-search-amount").html("$"+$("#ss-search-slider").slider("value"));
$(document).on("click",".ss-search-main-subject",function(){var a=this.getAttribute("data-ss-msid");$(".ss-search-main-subject").removeClass("is-selected");$(this).addClass("is-selected");$(".ss-search-subjects").addClass("hide");$('.ss-search-subjects[data-ss-msid="'+a+'"]').removeClass("hide")});$('.ss-search-subject input[type="checkbox"]').on("change",function(){ss_get_search_results()});$(".ss-search-available-now").on("change",function(){ss_get_search_results()});$(document).on("click","#ss-hire-now",function(){$.ssModal({action:"close"});$.ajax({url:"/ajax/user/hire_now",type:"POST",data:{hours:$("#ss-hire-hours").val(),tutor_id:user_view_id,description:$("#ss-hire-desc textarea").val()}}).done(function(a){if(1===a.error)"hours"===a.error_type?$.ssModal({modalId:"hire-hours-limit"}):"description"===a.error_type?$.ssModal({modalId:"hire-description"}):"money"===a.error_type?$.ssModal({modalId:"hire-money"}):$.ssModal({modalId:"hire-other"});else{$.ssModal({modalId:"hire-now-send",
canBeClosed:0});var c=setInterval(function(){var g=a.expire-Math.round(Date.now()/1E3);0>g?(clearInterval(c),$.ssModal({action:"close"})):$("#ss-modal-hire-now-send-expire span").text(convert_seconds(g))},1E3)}})});
socket.on("hire_now",function(a){$("#ss-modal-hire-now-notify-person img").attr("src",a.student_profile_picture);$("#ss-modal-hire-now-notify-person h2").text(a.student_name);$("#ss-modal-hire-now-notify-hours").text(a.hours);$("#ss-modal-hire-now-notify-price").text(parseInt(a.price/a.hours,10));$("#ss-modal-hire-now-notify-description").text(a.description);$("#ss-modal-hire-now-notify-buttons")[0].setAttribute("data-ss-request-id",a.request_id);$.ssModal({modalId:"hire-now-notify",canBeClosed:0});
var c=setInterval(function(){var g=a.expire-Math.round(Date.now()/1E3);0>g?(clearInterval(c),$.ssModal({action:"close"})):$("#ss-modal-hire-now-notify-expire span").text(convert_seconds(g))},1E3)});$("#ss-modal-hire-now-notify-buttons").on("click","#ss-modal-hire-now-notify-accept",function(){var a=$(this).parent()[0].getAttribute("data-ss-request-id");$.ajax({url:"/ajax/user/hire_now_approve",type:"POST",data:{hnr_id:a}}).done(function(a){window.location.href="/session/start"})});
$("#ss-modal-hire-now-notify-buttons").on("click","#ss-modal-hire-now-notify-decline",function(){var a=$(this).parent()[0].getAttribute("data-ss-request-id");$.ssModal({action:"close"});$.ajax({url:"/ajax/user/hire_now_decline",type:"POST",data:{hnr_id:a}}).done(function(a){})});socket.on("hire_now_response",function(a){"approve"==a.response?window.location.href="/session/start":$.ssModal({action:"close"})});socket.on("new_message",function(a){audio_alert();$(".ss-chat").is(":visible")||$.growl({title:"New message!",message:'<span class="bold">'+a.from_name+"</span> sent you a message!",from_id:a.from_id})});$(document).on("click",".header-chat-icon",function(){$(".ss-chat").is(":visible")?$.pageslide.close():($(".header-icon-count",this).text("0"),$(".header-icon-count",this).addClass("hide"),$.pageslide({direction:"left",href:"#ss-chat-inner",modal:!0}),$(".ss-chat").mCustomScrollbar())});
$(".ss-chat").on("click",".ss-chat-category",function(){$(".ss-chat-category").removeClass("is-active");$(this).addClass("is-active");var a=this.getAttribute("data-ss-chat-category");$(".ss-chat-category-items:visible").fadeOut(250,function(){$('.ss-chat-category-items[data-ss-chat-category="'+a+'"]').fadeIn(250,function(){$(".ss-chat").mCustomScrollbar("update")})})});
var add_ss_chat_message=function(a,c,g,l){var b=$(".ss-chat .ss-chat-conversation-write").clone().removeClass("ss-chat-conversation-write");b.removeClass("sent-message");b.addClass(a+"-message");$(".message-content p",b).text_multiline(c);$(".message-time",b)[0].setAttribute("data-time",g);$(".message-time",b).show();!1!==l&&$(".message-picture img",b)[0].setAttribute("src",l);$(".ss-chat-conversation-write").before(b)};
$(".ss-chat").on("click",".ss-chat-item",function(){var a=this.getAttribute("data-ss-uid");$(".ss-chat-main").fadeOut(250);$(".ss-chat-conversation")[0].setAttribute("data-ss-uid",a);$.ajax({url:"/ajax/messages/get_conversation",type:"GET",data:{uid:a}}).done(function(a){$(".ss-chat .sent-message, .ss-chat .received-message").not(".ss-chat-conversation-write").remove();$.each(a,function(a,c){add_ss_chat_message(c.type,c.message,c.created_at,c.message_picture)});$(".chat-conversation-container").removeClass("is-green");
$(".chat-conversation-container").removeClass("is-blue");$(".chat-conversation-container").removeClass("is-red");$(".ss-chat .ss-chat-category.is-active .ss-chat-category-bull").hasClass("is-red")?$(".chat-conversation-container").addClass("is-red"):$(".ss-chat .ss-chat-category.is-active .ss-chat-category-bull").hasClass("is-blue")?$(".chat-conversation-container").addClass("is-blue"):$(".chat-conversation-container").addClass("is-green");$(".ss-chat-conversation").fadeIn(250,function(){$(".ss-chat").mCustomScrollbar("update");
$(".ss-chat").mCustomScrollbar("scrollTo","bottom")});convert_time()})}).on("click",".ss-chat-conversation-back",function(){$(".ss-chat-conversation").fadeOut(250,function(){$(".ss-chat .sent-message textarea").val("");$(".ss-chat-main").fadeIn(250,function(){$(".ss-chat").mCustomScrollbar("update")})})});
$(".ss-chat").on("keyup",".sent-message textarea",function(a){for(;$(this).outerHeight()<this.scrollHeight+parseFloat($(this).css("borderTopWidth"))+parseFloat($(this).css("borderBottomWidth"));)$(this).height($(this).height()+10),$(".ss-chat").mCustomScrollbar("update");13===a.keyCode&&""!==$.trim($(this).val())&&(a=$(".ss-chat-conversation")[0].getAttribute("data-ss-uid"),add_ss_chat_message("sent",$.trim($(this).val()),Math.round(new Date/1E3),!1),$(".ss-chat").mCustomScrollbar("update"),$(".ss-chat").mCustomScrollbar("scrollTo",
"bottom"),convert_time(),$.ajax({url:"/ajax/messages/send_message",type:"POST",data:{message:$.trim($(this).val()),uid:a}}).done(function(a){}),$(this).val(""),$(this).height(30))}).on("focus",".sent-message textarea",function(){$(".ss-chat").mCustomScrollbar("scrollTo",this)});
socket.on("new_message",function(a){a.from_id==$(".ss-chat-conversation")[0].getAttribute("data-ss-uid")&&(add_ss_chat_message("received",a.message,Math.round(new Date/1E3),a.profile_picture),$(".ss-chat").mCustomScrollbar("update"),$(".ss-chat").mCustomScrollbar("scrollTo","bottom"),convert_time())});
var ss_chat_open_user_conversation=function(a){$(".ss-chat").is(":visible")||$.pageslide({direction:"left",href:"#ss-chat-inner",modal:!0});$(".ss-chat-main").fadeOut(250);$(".ss-chat-conversation")[0].setAttribute("data-ss-uid",a);$.ajax({url:"/ajax/messages/get_conversation",type:"GET",data:{uid:a}}).done(function(a){$(".ss-chat .sent-message, .ss-chat .received-message").not(".ss-chat-conversation-write").remove();$.each(a,function(a,c){add_ss_chat_message(c.type,c.message,c.created_at,c.message_picture)});
$(".chat-conversation-container").removeClass("is-green");$(".chat-conversation-container").removeClass("is-blue");$(".chat-conversation-container").removeClass("is-red");$(".chat-conversation-container").addClass("is-red");$(".ss-chat-conversation").fadeIn(250,function(){$(".ss-chat").find(".mCSB_container").length?$(".ss-chat").mCustomScrollbar("update"):$(".ss-chat").mCustomScrollbar();$(".ss-chat").mCustomScrollbar("scrollTo","bottom")});convert_time()})};
$(document).on("click",".ss-chat-open-user-conversation",function(){ss_chat_open_user_conversation(this.getAttribute("data-ss-uid"))});
