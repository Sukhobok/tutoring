(function(a){var c,n,d={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:!0,tokenLimit:null,tokenDelimiter:",",preventDuplicates:!1,tokenValue:"id",prePopulate:null,processPrePopulate:!1,idPrefix:"token-input-",resultsFormatter:function(a){return"<li>"+a[this.propertyToSearch]+"</li>"},tokenFormatter:function(a){return"<li><p>"+
a[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null},l={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"};c=0;n=1;var h=
{init:function(c,l){var b=a.extend({},d,l||{});return this.each(function(){a(this).data("tokenInputObject",new a.TokenList(this,c,b))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(a){this.data("tokenInputObject").add(a);return this},remove:function(a){this.data("tokenInputObject").remove(a);return this},get:function(){return this.data("tokenInputObject").getTokens()}};a.fn.tokenInput=function(a){return h[a]?h[a].apply(this,Array.prototype.slice.call(arguments,
1)):h.init.apply(this,arguments)};a.TokenList=function(d,h,b){function J(){null!==b.tokenLimit&&q>=b.tokenLimit&&(g.hide(),u())}function K(e){var p=b.tokenFormatter(e),p=a(p).addClass(b.classes.token).insertBefore(v);a("<span>"+b.deleteText+"</span>").addClass(b.classes.tokenDelete).appendTo(p).click(function(){B(a(this).parent());m.change();return!1});var c={id:e.id};c[b.propertyToSearch]=e[b.propertyToSearch];a.data(p.get(0),"tokeninput",e);r=r.slice(0,s).concat([c]).concat(r.slice(s));s++;L(r,
m);q+=1;null!==b.tokenLimit&&q>=b.tokenLimit&&(g.hide(),u());return p}function D(e){var c=b.onAdd;if(0<q&&b.preventDuplicates){var f=null;w.children().each(function(){var b=a(this),c=a.data(b.get(0),"tokeninput");if(c&&c.id===e.id)return f=b,!1});if(f){A(f);v.insertAfter(f);g.focus();return}}if(null==b.tokenLimit||q<b.tokenLimit)K(e),J();g.val("");u();a.isFunction(c)&&c.call(m,e)}function A(a){a.addClass(b.classes.selectedToken);k=a.get(0);g.val("");u()}function y(a,p){a.removeClass(b.classes.selectedToken);
k=null;p===c?(v.insertBefore(a),s--):p===n?(v.insertAfter(a),s++):(v.appendTo(w),s=q);g.focus()}function B(e){var c=a.data(e.get(0),"tokeninput"),f=b.onDelete,z=e.prevAll().length;z>s&&z--;e.remove();k=null;g.focus();r=r.slice(0,z).concat(r.slice(z+1));z<s&&s--;L(r,m);q-=1;null!==b.tokenLimit&&g.show().val("").focus();a.isFunction(f)&&f.call(m,c)}function L(e,c){var f=a.map(e,function(a){return a[b.tokenValue]});c.val(f.join(b.tokenDelimiter))}function u(){x.hide().empty();t=null}function C(){x.css({position:"absolute",
top:a(w).offset().top+a(w).outerHeight(),left:a(w).offset().left,zindex:999}).show()}function E(e,c){if(c&&c.length){x.empty();var f=a("<ul>").appendTo(x).mouseover(function(b){F(a(b.target).closest("li"))}).mousedown(function(b){D(a(b.target).closest("li").data("tokeninput"));m.change();return!1}).hide();a.each(c,function(c,p){var d=b.resultsFormatter(p),d=d.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+p[b.propertyToSearch]+")(?![^<>]*>)(?![^&;]+;)","g"),p[b.propertyToSearch].replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+
e+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")),d=a(d).appendTo(f);c%2?d.addClass(b.classes.dropdownItem):d.addClass(b.classes.dropdownItem2);0===c&&F(d);a.data(d.get(0),"tokeninput",p)});C();b.animateDropdown?f.slideDown("fast"):f.show()}else b.noResultsText&&(x.html("<p>"+b.noResultsText+"</p>"),C())}function F(e){e&&(t&&(a(t).removeClass(b.classes.selectedDropdownItem),t=null),e.addClass(b.classes.selectedDropdownItem),t=e.get(0))}function M(){var e=g.val().toLowerCase();e&&e.length&&(k&&y(a(k),
n),e.length>=b.minChars?(b.searchingText&&(x.html("<p>"+b.searchingText+"</p>"),C()),clearTimeout(N),N=setTimeout(function(){P(e)},b.searchDelay)):u())}function P(e){var c=e+G(),f=H.get(c);if(f)E(e,f);else if(b.url){var f=G(),d={data:{}};-1<f.indexOf("?")?(f=f.split("?"),d.url=f[0],f=f[1].split("&"),a.each(f,function(a,b){var e=b.split("=");d.data[e[0]]=e[1]})):d.url=f;d.data[b.queryParam]=e;d.type=b.method;d.dataType=b.contentType;b.crossDomain&&(d.dataType="jsonp");d.success=function(d){a.isFunction(b.onResult)&&
(d=b.onResult.call(m,d));H.add(c,b.jsonContainer?d[b.jsonContainer]:d);g.val().toLowerCase()===e&&E(e,b.jsonContainer?d[b.jsonContainer]:d)};a.ajax(d)}else b.local_data&&(f=a.grep(b.local_data,function(a){return-1<a[b.propertyToSearch].toLowerCase().indexOf(e.toLowerCase())}),a.isFunction(b.onResult)&&(f=b.onResult.call(m,f)),H.add(c,f),E(e,f))}function G(){var a=b.url;"function"==typeof b.url&&(a=b.url.call());return a}"string"===a.type(h)||"function"===a.type(h)?(b.url=h,h=G(),void 0===b.crossDomain&&
(-1===h.indexOf("://")?b.crossDomain=!1:b.crossDomain=location.href.split(/\/+/g)[1]!==h.split(/\/+/g)[1])):"object"===typeof h&&(b.local_data=h);b.classes?b.classes=a.extend({},l,b.classes):b.theme?(b.classes={},a.each(l,function(a,c){b.classes[a]=c+"-"+b.theme})):b.classes=l;var r=[],q=0,H=new a.TokenList.Cache,N,I,g=a('<input type="text"  autocomplete="off">').css({outline:"none"}).attr("id",b.idPrefix+d.id).focus(function(){if((null===b.tokenLimit||b.tokenLimit!==q)&&b.hintText)x.html("<p>"+b.hintText+
"</p>"),C()}).blur(function(){u();a(this).val("")}).bind("keyup keydown blur update",function(){if(I!==(I=g.val())){var a=I.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");O.html(a);g.width(O.width()+30)}}).keydown(function(b){var d,f;switch(b.keyCode){case 37:case 39:case 38:case 40:if(a(this).val())return d=null,d=40===b.keyCode||39===b.keyCode?a(t).next():a(t).prev(),d.length&&F(d),!1;d=v.prev();f=v.next();d.length&&d.get(0)===k||f.length&&f.get(0)===k?37===b.keyCode||
38===b.keyCode?y(a(k),c):y(a(k),n):(37===b.keyCode||38===b.keyCode)&&d.length?A(a(d.get(0))):(39===b.keyCode||40===b.keyCode)&&f.length&&A(a(f.get(0)));break;case 8:d=v.prev();if(a(this).val().length)1===a(this).val().length?u():setTimeout(function(){M()},5);else return k?(B(a(k)),m.change()):d.length&&A(a(d.get(0))),!1;break;case 9:case 13:case 108:case 188:if(t)return D(a(t).data("tokeninput")),m.change(),!1;break;case 27:return u(),!0;default:String.fromCharCode(b.which)&&setTimeout(function(){M()},
5)}}),m=a(d).hide().val("").focus(function(){g.focus()}).blur(function(){g.blur()}),k=null,s=0,t=null,w=a("<ul />").addClass(b.classes.tokenList).click(function(b){if((b=a(b.target).closest("li"))&&b.get(0)&&a.data(b.get(0),"tokeninput")){var c=k;k&&y(a(k),2);c===b.get(0)?y(b,2):A(b)}else k&&y(a(k),2),g.focus()}).mouseover(function(c){(c=a(c.target).closest("li"))&&k!==this&&c.addClass(b.classes.highlightedToken)}).mouseout(function(c){(c=a(c.target).closest("li"))&&k!==this&&c.removeClass(b.classes.highlightedToken)}).insertBefore(m),
v=a("<li />").addClass(b.classes.inputToken).appendTo(w).append(g),x=a("<div>").addClass(b.classes.dropdown).appendTo("body").hide(),O=a("<tester/>").insertAfter(g).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:g.css("fontSize"),fontFamily:g.css("fontFamily"),fontWeight:g.css("fontWeight"),letterSpacing:g.css("letterSpacing"),whiteSpace:"nowrap"});m.val("");d=b.prePopulate||m.data("pre");b.processPrePopulate&&a.isFunction(b.onResult)&&(d=b.onResult.call(m,d));d&&d.length&&a.each(d,
function(a,b){K(b);J()});a.isFunction(b.onReady)&&b.onReady.call();this.clear=function(){w.children("li").each(function(){0===a(this).children("input").length&&B(a(this))})};this.add=function(a){D(a)};this.remove=function(b){w.children("li").each(function(){if(0===a(this).children("input").length){var c=a(this).data("tokeninput"),d=!0,g;for(g in b)if(b[g]!==c[g]){d=!1;break}d&&B(a(this))}})};this.getTokens=function(){return r}};a.TokenList.Cache=function(c){var d=a.extend({max_size:500},c),b={},h=
0;this.add=function(a,c){h>d.max_size&&(b={},h=0);b[a]||(h+=1);b[a]=c};this.get=function(a){return b[a]}}})(jQuery);$(document).on("click",".ss-link",function(){window.location.href=this.getAttribute("data-ss-link")});$(document).on("click",".header-settings-icon",function(){$(".header-settings-extended").animate({height:"toggle"})});$(document).on("click",".add-friend-button",function(){var a=this.getAttribute("data-uid");$(this).hide();$.ajax({url:"/ajax/user/send_friend_request",method:"POST",data:{id:a}}).done(function(a){})});function dateToString(a){var c=a.getDate(),n="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],d=a.getFullYear(),l=a.getHours();a=a.getMinutes();var h="AM";12<=l&&(l-=12,h="PM");0==l&&(l=12);return""+n+" "+(9>=c?"0"+c:c)+", "+d+" at "+(9>=l?"0"+l:l)+":"+(9>=a?"0"+a:a)+" "+h}
function convert_time(){$(".time-ago").each(function(){if(""==this.getAttribute("data-time"))return!0;var a=new Date(1E3*this.getAttribute("data-time")),c=Math.round((new Date-a)/1E3);0>c?(c=0-c,60>c?$(this).html("in a few seconds"):(c=Math.floor(c/60),10>c?$(this).html("in about "+c+" minutes"):$(this).html(dateToString(a)))):60>c?$(this).html("a few seconds ago"):(c=Math.floor(c/60),60>c?$(this).html("about "+c+" minute"+(1<c?"s":"")+" ago"):(c=Math.floor(c/60),24>c?$(this).html("about "+c+" hours ago"):
$(this).html(dateToString(a))))})}convert_time();var convert_time_internval=setInterval(convert_time,6E4);$(document).on("click",".page-tab",function(){var a=".page-tab-"+this.getAttribute("data-ss-tab");$(".page-tab").removeClass("is-active");$(this).addClass("is-active");$(".page-tab-component").hide();$(a).show()});$(document).on("click",".ss-photo",function(){console.log("--Expand photo")});
$(document).on("change",".ss-picture-upload",function(){var a=this;if(a.files&&a.files[0]){var c=a.files[0];if(!c.type.match(/image.*/))return!1;var n=new FileReader;n.onload=function(c){var l=$(a).parents(".ss-file-wrapper").siblings(".ss-picture-preview");c=$("<img/>").attr("src",c.target.result);l.html(c).show();c.Jcrop({aspectRatio:1,minSize:[50,50],setSelect:[100,100,50,50],onSelect:function(a){$('input[name="profile_x"]').val(a.x);$('input[name="profile_y"]').val(a.y);$('input[name="profile_w"]').val(a.w);
$('input[name="profile_h"]').val(a.h)}})};n.readAsDataURL(c)}});$(document).on("click",".thumb-up",function(){var a=$(this).children(".thumb-up-count"),c=$(this).siblings(".thumb-down").children(".thumb-down-count"),n=this.getAttribute("data-pid");$.ajax({url:"/ajax/post/save_thumb",method:"POST",data:{type:"up",id:n}}).done(function(d){0==d.result?(c.text(parseInt(c.text())-1),a.text(parseInt(a.text())+1)):1==d.result&&a.text(parseInt(a.text())+1)})});
$(document).on("click",".thumb-down",function(){var a=$(this).children(".thumb-down-count"),c=$(this).siblings(".thumb-up").children(".thumb-up-count"),n=this.getAttribute("data-pid");$.ajax({url:"/ajax/post/save_thumb",method:"POST",data:{type:"down",id:n}}).done(function(d){0==d.result?(a.text(parseInt(a.text())+1),c.text(parseInt(c.text())-1)):1==d.result&&a.text(parseInt(a.text())+1)})});$(document).on("change",'[name="user_photos[]"]',function(){var a=new FormData;for(i=0;i<this.files.length;i++)a.append("user_photos[]",this.files[i]);$.ajax({url:"/ajax/user/upload_photos",type:"POST",data:a,processData:!1,contentType:!1,dataType:"json"}).done(function(a){console.log(a)})});
$(document).on("mouseenter",".ss-photo",function(){$(this).children(".ss-photo-hover").fadeIn();$(this).children(".ss-photo-delete").fadeIn()}).on("mouseleave",".ss-photo",function(){$(this).children(".ss-photo-hover").fadeOut();$(this).children(".ss-photo-delete").fadeOut()});$(document).on("click",".ss-photo-delete",function(a){a.stopPropagation();a=this.getAttribute("data-ss-photo-id");$.ajax({url:"/ajax/user/delete_photo",type:"POST",data:{id:a}}).done(function(a){console.log(a)})});$("#right-calendar").datepicker();$(document).on("click",".page-settings .ss-delete",function(){$(this).parents("tr").remove()});$(document).on("click",".page-settings .ss-add-education",function(){var a=$(".hide.snippet-add-education").clone().removeClass("hide"),a=$("<tr></tr>").append($("<td></td>").append(a));$(".ss-table-education").prepend(a)});
